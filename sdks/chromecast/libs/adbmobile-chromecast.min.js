/*************************************************************************
 * ADOBE CONFIDENTIAL
 * ___________________
 *
 * Copyright 2020 Adobe
 * All Rights Reserved.
 *
 * NOTICE: All information contained herein is, and remains
 * the property of Adobe and its suppliers, if any. The intellectual
 * and technical concepts contained herein are proprietary to Adobe
 * and its suppliers and are protected by all applicable intellectual
 * property laws, including trade secret and copyright laws.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe.
 **************************************************************************/

// ADBMobile cc-js-3.0.2 - 03-26-2021 

var ADBMobile_platform=function(){function a(a,b){if(!a)return null;try{return b?window.localStorage.setItem(a,b):window.localStorage.removeItem(a),b}catch(c){_logger.error("[Platform] writeValue - Failed to store data element: "+c)}return null}function b(a){if(!a)return null;try{return window.localStorage.getItem(a)}catch(b){_logger.error("[Platform] readValue - Failed to retrieve data element: "+b)}return null}function c(a,b,c,d,e,f){if(!a)return _logger.error("[Platform] httpRequestAsync - URL required but was not passed"),null;c=c||{},e=e||500,f=f||function(){};var g=new XMLHttpRequest;g.onreadystatechange=function(){4==g.readyState&&(f(g.status,g.responseText,d||a,g.getAllResponseHeaders()),f=function(){})},g.timeout=e,g.ontimeout=function(){f(0,null,a),f=function(){}},g.open(b,a,!0),Object.keys(c).forEach(function(a){g.setRequestHeader(a,this[a])},c),g.send(d)}function d(){return"Chromecast resolution"}function e(){return"undefined"!=typeof cast&&cast.receiver?cast.receiver.VERSION:"Chromecast OS"}function f(){return"Chromecast"}function g(){return"Chromecast App ID"}function h(){return g()}function i(){return Math.floor((new Date).getTime()/1e3)}function j(){return(new Date).getTime()}function k(){return(new Date).toISOString()}function l(){return"00/00/0000 00:00:00 0 "+(new Date).getTimezoneOffset()}function m(a,b){return setInterval(a,b)}function n(a){clearInterval(a)}function o(a){return window.btoa(a)}function p(a){return window.atob(a)}function q(a){var b;if(window.DOMParser){b=(new DOMParser).parseFromString(a,"text/xml")}return b}function r(a){return a.item(0)}return{httpRequestAsync:c,writeValue:a,readValue:b,getResolution:d,getDeviceName:f,getOSVersion:e,getAppID:g,getDefaultPageName:h,getTimeSince1970:i,getTimeSince1970Millis:j,getDateInISOString:k,getTimestampString:l,setInterval:m,clearInterval:n,encodeBase64String:o,decodeBase64String:p,parseXML:q,getBaseItem:r}}(),ADBMobile=function(){var a=function(){function a(){i=ADBMobile_platform.readValue("adb_aid"),k=ADBMobile_platform.readValue("adb_ignore_aid")}function b(){return"yxxxxxxxxxxxxxxx-zxxxxxxxxxxxxxxx".replace(/[xyz]/g,function(a){return"0123456789ABCDEF".charAt(Math.floor(Math.random()*({y:7,x:16,z:4}[a]||0)))})}function c(){i=null,k=null,ADBMobile_platform.writeValue("adb_aid",""),ADBMobile_platform.writeValue("adb_ignore_aid","")}function d(a){h.isFunction(a)&&(l.push({callback:a}),f())}function f(){if(!m){var a=l.shift();if(a){m=!0;var c=a.callback,d=!1;do{if(e.getPrivacyStatus()!==e.PRIVACY_STATUS_OPT_IN){c(null);break}if(i){c(i);break}if(k&&e.visitorIDServiceEnabled()){c(null);break}d=!0}while(!1);if(!d)return m=!1,void f();j.getMarketingCloudIDAsync(function(a){var d=(e.ssl()?"https":"http")+"://"+e.trackingServer()+"/id";a&&(d+=j.getAnalyticsIDRequestParameterString()),ADBMobile_platform.httpRequestAsync(d,"GET",{},null,500,function(a,d){if(e.getPrivacyStatus()!==e.PRIVACY_STATUS_OPT_IN)g.debug("[Aid] Dropping response as privacy is not set to opted in."),c(null);else{if(200==a&&d)try{i=JSON.parse(d).id,ADBMobile_platform.writeValue("adb_aid",i)}catch(h){g.debug("[Aid] Error parsing aid call response.")}!i&&e.visitorIDServiceEnabled()?ADBMobile_platform.writeValue("adb_ignore_aid",!0):ADBMobile_platform.readValue("adb_aid")||(i=b(),ADBMobile_platform.writeValue("adb_aid",i)),i&&e.visitorIDServiceEnabled()&&j.idSync({AVID:i}),c(i)}m=!1,f()})})}}}var i,k,l=[],m=!1;return{init:a,getAIDAsync:d,purgeAid:c}}(),b=function(){function a(a,c){var d={};b(c)&&Object.keys(c).forEach(function(a){d[a]=this[a]},c),g(d,{pageName:a||ADBMobile_platform.getDefaultPageName()},ADBMobile_platform.getTimeSince1970())}function b(a){return null!==a&&(void 0!==a&&a.constructor==={}.constructor)}function d(a,c,d){var e={};b(c)&&Object.keys(c).forEach(function(a){e[a]=this[a]},c),e["a.internalaction"]=a;var f={pe:"lnk_o",pev2:"ADBINTERNAL:"+a,pageName:ADBMobile_platform.getDefaultPageName()};g(e,f,d)}function f(a,c){var d={};b(c)&&Object.keys(c).forEach(function(a){d[a]=this[a]},c),d["a.action"]=a;var e={pe:"lnk_o",pev2:"AMACTION:"+a,pageName:ADBMobile_platform.getDefaultPageName()};g(d,e,ADBMobile_platform.getTimeSince1970())}function g(a,b,d){if(e.analyticsEnabled()){a=a||{},b=b||{},d=d||ADBMobile_platform.getTimeSince1970(),a["a.Resolution"]=ADBMobile_platform.getResolution(),a["a.DeviceName"]=ADBMobile_platform.getDeviceName(),a["a.OSVersion"]=ADBMobile_platform.getOSVersion(),a["a.AppID"]=ADBMobile_platform.getAppID();var f=e.getUserIdentifier();f&&(b.vid=f),e.offlineTrackingEnabled()&&(b.ts=d),b.ce=e.characterSet(),b.t=ADBMobile_platform.getTimestampString(),Object.keys(a).forEach(function(a){"&&"===a.slice(0,2)&&(b[a.slice(2)]=this[a],delete this[a])},a);var g="ndh=1"+h.serializeParameters(b)+h.serializeContextData(a);c.queue(g,ADBMobile_platform.getTimeSince1970()),q.checkFor3rdPartyCallbacks(b,a)}}return{trackAction:f,trackState:a,trackInternal:d}}(),c=function(){function b(a,b){e.getPrivacyStatus()===e.PRIVACY_STATUS_OPT_IN?(g.debug("[Analytics] Queued Hit("+a+")"),l.push({frag:a,ts:b}),c()):g.debug("[Analytics] Not queueing hit. Privacy is not set to optedin.")}function c(){if(!m){m=!0;var b=l.shift();if(!b)return void(m=!1);if(!e.offlineTrackingEnabled()){var i=ADBMobile_platform.getTimeSince1970()-b.ts;if(i>60)return g.debug("[Analytics] Hit is greater than 60 seconds old ("+i+"s), will be deleted ("+b.frag+")"),m=!1,void c()}j.idSync(null,function(e){var i=b.frag;e&&(i+=h.serializeParameters(j.getAnalyticsParameters())),a.getAIDAsync(function(a){a&&(i+=h.serializeKeyValuePair("aid",a)),ADBMobile_platform.httpRequestAsync(f(),"POST",{"Content-type":"application/x-www-form-urlencoded"},i,2e3,function(a,b,e){if(200==a){g.debug("[Analytics] Successfully sent hit ("+e+")");var f=null;if(b)try{f=JSON.parse(b)}catch(h){f=null}f?(g.debug("[Analytics] JSON response received: "+b),d.processJsonResponse(f)):g.debug("[Analytics] Empty or non JSON response received")}else g.error("[Analytics] Unable to send hit ("+e+") response ("+b+")");m=!1,c()})})})}}function f(){var a=e.ssl()?"https":"http";return a+="://"+e.trackingServer()+"/b/ss/"+e.reportSuiteIDs()+"/"+e.getAnalyticsResponseType()+"/"+i.codeVersion+"/s"+Math.floor(1e7*Math.random())}function k(){l=[]}var l=[],m=!1;return{queue:b,purgeAnalyticsQueue:k}}(),d=function(){function a(){if(!v){v=!0;var b=u.shift();if(!b)return void(v=!1);ADBMobile_platform.httpRequestAsync(b,"GET",{},"",2e3,function(b,c,d){if(200==b&&e.getPrivacyStatus()===e.PRIVACY_STATUS_OPT_IN){g.debug("[Audience Manager] Successfully Sent Signal ("+d+"), response ("+c+")");var f=null;try{f=JSON.parse(c)}catch(h){g.debug("[Audience Manager] Unable to parse response ("+h+")")}f&&t(f)}else g.error("[Audience Manager] Unable to send signal ("+d+")");v=!1,a()})}}function b(b){if(e.audienceManagerEnabled())if(e.getPrivacyStatus()===e.PRIVACY_STATUS_OPT_IN){var d=c(b);g.debug("[Audience Manager] Queued Signal("+d+")"),u.push(d),a()}else g.debug("[Audience Manager] Not queueing hit. Privacy is not set to optedin.")}function c(a){return(d()+f(a)+i()+"&d_ptfm=appletv&d_dst=1&d_rtbd=json").replace(/\?\&/i,"?")}function d(){return e.ssl()?"https":"http://"+e.aamServer()+"/event?"}function f(a){a=a||{};var b="";return Object.keys(a).forEach(function(a){b+=h.serializeKeyValuePair(k(a),this[a])},a),b}function i(){var a="",b=r()||null;b&&(a+=h.serializeKeyValuePair("d_uuid",b));var c=o()||null,d=p()||null;return c&&d&&(a+=h.serializeKeyValuePair("d_dpid",c)+h.serializeKeyValuePair("d_dpuuid",d)),a+=j.getAAMParameterString()}function k(a){return a.replace("/./g","_")}function l(a){var b=JSON.stringify(a);ADBMobile_platform.writeValue("adb_aam_profile",b)}function m(){var a=ADBMobile_platform.readValue("adb_aam_profile");return JSON.parse(a)}function n(a,b){e.getPrivacyStatus()===e.PRIVACY_STATUS_OPT_IN&&(ADBMobile_platform.writeValue("adb_aam_dpid",a),ADBMobile_platform.writeValue("adb_aam_dpuuid",b))}function o(){return ADBMobile_platform.readValue("adb_aam_dpid")}function p(){return ADBMobile_platform.readValue("adb_aam_dpuuid")}function q(a){e.getPrivacyStatus()===e.PRIVACY_STATUS_OPT_IN&&ADBMobile_platform.writeValue("adb_aam_uuid",a)}function r(){return ADBMobile_platform.readValue("adb_aam_uuid")}function s(){u=[],ADBMobile_platform.writeValue("adb_aam_profile",""),ADBMobile_platform.writeValue("adb_aam_dpid",""),ADBMobile_platform.writeValue("adb_aam_dpuuid",""),ADBMobile_platform.writeValue("adb_aam_uuid","")}function t(a){var b=a.uuid||null;b&&q(b),(a.dests||[]).map(function(a){var b=a.c||null;b&&(g.debug("[Audience Manager] Forwarding 'dests' request ("+b+")"),ADBMobile_platform.httpRequestAsync(b,"GET",{},"",2e3,null))});var c=a.stuff||[],d={};c.map(function(a){var b=a.cn||null,c=a.cv||null;b&&c&&(d[b]=c)}),l(d)}var u=[],v=!1;return{getUUID:r,getDpid:o,getDpuuid:p,setDpidAndDpuuid:n,getVisitorProfile:m,submitSignal:b,purgeAamIdsAndQueue:s,processJsonResponse:t}}(),e=function(){function b(){if(y=q()||null,y&&g.debug("[Config] Found custom visitor id("+y+")"),"object"!=typeof ADBMobileConfig||null===ADBMobileConfig)return void g.error("[Config] Unable to find defined ADBMobileConfig object.");"object"==typeof ADBMobileConfig.analytics&&(C=ADBMobileConfig.analytics.offlineEnabled||!1,z=ADBMobileConfig.analytics.server||null,A=ADBMobileConfig.analytics.rsids||null,B=ADBMobileConfig.analytics.ssl||!1,D=ADBMobileConfig.analytics.lifecycleTimeout||300,E=ADBMobileConfig.analytics.privacyDefault||"optedin"),g.debug("[Config] Analytics "+(n()?"Enabled":"Disabled")),"object"==typeof ADBMobileConfig.audienceManager&&(F=ADBMobileConfig.audienceManager.server||null,"boolean"==typeof ADBMobileConfig.audienceManager.analyticsForwardingEnabled&&(G=ADBMobileConfig.audienceManager.analyticsForwardingEnabled||!1)),g.debug("[Config] Audience Manager "+(l()?"Enabled":"Disabled")),g.debug("[Config] Audience Manager Server Side Forwarding "+(G?"Enabled":"Disabled")),"object"==typeof ADBMobileConfig.marketingCloud&&(H=ADBMobileConfig.marketingCloud.org||null,I=ADBMobileConfig.marketingCloud.server||null),g.debug("[Config] Visitor ID Service "+(o()?"Enabled":"Disabled")),"object"==typeof ADBMobileConfig.mediaHeartbeat&&(J=ADBMobileConfig.mediaHeartbeat.server||null,K=ADBMobileConfig.mediaHeartbeat.publisher||null,L=ADBMobileConfig.mediaHeartbeat.channel||null,M=ADBMobileConfig.mediaHeartbeat.playerName||null,N=ADBMobileConfig.mediaHeartbeat.ssl||!1,O=ADBMobileConfig.mediaHeartbeat.ovp||null,P=ADBMobileConfig.mediaHeartbeat.sdkVersion||null,-1!=J.indexOf("hb.omtrdc.net")&&(g.error("[Config] MediaHeartbeat trackingServer should be set to Media collection endpoint and not heartbeat endpoint. Contact your Adobe representative for more information."),J=null)),g.debug("[Config] MediaHeartbeat "+(i()?"Enabled":"Disabled")),"object"==typeof ADBMobileConfig.messages&&(Q=ADBMobileConfig.messages),"object"==typeof ADBMobileConfig.remotes&&(R=ADBMobileConfig.remotes)}function i(){return!(!J||!n())}function l(){return!!F}function m(){return G?10:0}function n(){return!(!z||!A)}function o(){return!!H}function p(a){e.getPrivacyStatus()===e.PRIVACY_STATUS_OPT_IN&&(ADBMobile_platform.writeValue("adb_vid",a),y=a)}function q(){return y}function r(){y=null,ADBMobile_platform.writeValue("adb_vid","")}function s(a){ADBMobile_platform.writeValue("adb_privacy",a),a===e.PRIVACY_STATUS_OPT_OUT&&u(),k.onPrivacyChange()}function t(){var a=ADBMobile_platform.readValue("adb_privacy");return a||E}function u(){a.purgeAid(),e.purgeUserIdentifier(),c.purgeAnalyticsQueue(),d.purgeAamIdsAndQueue(),j.purgeVisitorIdService()}function v(a){h.isFunction(a)&&f.getAllIdentifiersAsync(a)}function w(){return Q}function x(){return R}var y=null,z=null,A=null,B=!1,C=!1,D=300,E="optedin",F=null,G=!1,H=null,I=null,J=null,K=null,L=null,M=null,N=!1,O=null,P=null,Q=null,R=null;return{getAllIdentifiersAsync:v,purgeUserIdentifier:r,trackingServer:function(){return z},reportSuiteIDs:function(){return A},ssl:function(){return B},offlineTrackingEnabled:function(){return C},lifecycleTimeout:function(){return D},characterSet:function(){return"UTF-8"},privacyDefault:function(){return E},aamServer:function(){return F},marketingCloudOrganizationIdentifier:function(){return H},marketingCloudCustomServer:function(){return I},mTrackingServer:function(){return J},mPublisher:function(){return K},mChannel:function(){return L},mPlayerName:function(){return M},mSSL:function(){return N},mOVP:function(){return O},mSDK:function(){return P},audienceManagerEnabled:l,getAnalyticsResponseType:m,analyticsEnabled:n,visitorIDServiceEnabled:o,mediaHeartbeatEnabled:i,setUserIdentifier:p,getUserIdentifier:q,setPrivacyStatus:s,getPrivacyStatus:t,getMessages:w,getRemotes:x,init:b}}();e.PRIVACY_STATUS_OPT_IN="optedin",e.PRIVACY_STATUS_OPT_OUT="optedout";var f=function(){function b(a){var b={clbFn:a};h(b),i(b)}function c(a){if(a.mcidReady&&a.aidReady){var b={},c=f();null!==c&&(b.companyContexts=c);var d=[],e=a.mcid;null!==e&&d.push(e);var h=a.aid;null!==h&&d.push(h);var i=k();null!==i&&d.push(i);var j=l();null!==j&&d.push(j);var n=m();if(null!==n&&d.push(n),d.length>0){var o={userIDs:d},p=[];p.push(o),b.users=p}try{var q=JSON.stringify(b);a.clbFn(q)}catch(r){g.debug("[Identities] identies.callback threw exception  ["+r+"]")}}}function f(){var a=e.marketingCloudOrganizationIdentifier();return n(a)?[{namespace:"imsOrgID",value:a}]:null}function h(a){j.getMarketingCloudIDAsync(function(b){var d=null;n(b)&&(d={namespace:"4",value:b,type:"namespaceId"}),a.mcid=d,a.mcidReady=!0,c(a)})}function i(b){a.getAIDAsync(function(a){var d=null;n(a)&&(d={namespace:"avid",value:a,type:"integrationCode"}),b.aid=d,b.aidReady=!0,c(b)})}function k(){var a=e.getUserIdentifier();if(n(a)){var b=e.reportSuiteIDs();return{namespace:"vid",value:a,type:"analytics",rsids:"string"==typeof b?b.trim().split(/\s*,\s*/):[]}}return null}function l(){var a=d.getUUID();return n(a)?{namespace:"0",value:a,type:"namespaceId"}:null}function m(){var a=d.getDpid(),b=d.getDpuuid();return n(a)&&n(b)?{namespace:a,value:b,type:"namespaceId"}:null}function n(a){return"string"==typeof a&&0!==a.length}return{getAllIdentifiersAsync:b}}(),g=function(){function a(a){"object"==typeof console&&console&&console.log&&console.log("["+ADBMobile_platform.getDateInISOString()+"] ADBMobile - "+a)}function b(a){h.isFunction(a)&&(k=a)}function c(a){j=a}function d(){return j}function e(b){j&&(a("Warning "+b),k&&k(b))}function f(b){j&&(a("Debug "+b),k&&k(b))}function g(b){a("Error "+b),k&&k(b)}function i(a){var b="["+a+"] ";return{warning:function(a){e(b+a)},debug:function(a){f(b+a)},error:function(a){g(b+a)}}}var j=!1,k=null;return{setDebugLogging:c,getDebugLogging:d,setLoggerCallback:b,warning:e,debug:f,error:g,instanceWithTag:i}}(),h=function(){function a(a){return"&c."+d(e(a))+"&.c"}function b(a,b){return void 0!==b&&null!==b?"&"+encodeURIComponent(a)+"="+encodeURIComponent(b):""}function c(a){var c="";for(var d in a)a.hasOwnProperty(d)&&(c+=b(d,a[d]));return c}function d(a){var c="";return a=a||{},Object.keys(a).forEach(function(a){this[a].v&&(c+=b(a,this[a].v)),this[a].subValues&&(c+="&"+a+"."+d(this[a].subValues)+"&."+a)},a),c}function e(a){var b={},c=f(a);return Object.keys(c).forEach(function(a){var c=this[a];!function a(b,c,d,e){if(!(e>=d.length)){var f=d[e];if(c[f]||(c[f]={}),d.length-1==e)return void(c[f].v=b);c[f].subValues||(c[f].subValues={}),a(b,c[f].subValues,d,e+1)}}(c,b,a.split("."),0)},c),b}function f(a){var b={};return a=a||{},Object.keys(a).forEach(function(a){if("string"==typeof a){var c=a.replace(l,".").replace(m,"");c&&(b[c]=this[a])}},a),b}function g(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function h(a){return null!=a&&"object"==typeof a}function i(a,b){if(h(a)&&h(b))for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function j(a){return"function"==typeof a}function k(a){var b={};try{a.trim().split(/[\r\n]+/).forEach(function(a){var c=a.split(":",1)[0],d=a.substring(c.length+2);c.length>0&&(b[c.toLowerCase()]=d)})}catch(c){}return b}var l=new RegExp("([.]){2,}","g"),m=new RegExp("[^0-9a-zA-Z._]|^[.]{1,}|[.]{1,}$","g");return{serializeContextData:a,serializeKeyValuePair:b,serializeParameters:c,isFunction:j,clone:g,append:i,isObject:h,parseHTTPHeaders:k}}(),i=function(){return{codeVersion:"cc-js-3.0.2-9a1553a"}}(),j=function(){function a(){m=ADBMobile_platform.readValue("adb_visitor_mid"),n=ADBMobile_platform.readValue("adb_visitor_blob"),o=ADBMobile_platform.readValue("adb_visitor_hint"),p=ADBMobile_platform.readValue("adb_visitor_ttl"),q=ADBMobile_platform.readValue("adb_visitor_sync");var a=e.marketingCloudCustomServer();"string"==typeof a&&(r.debug("Setting custom ID server "+a),u=a)}function b(){return"yxxxxxxxxxxxxxxxxxxyxxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return""+Math.floor(10*Math.random())}).replace(/[y]/g,function(){return""+Math.floor(9*Math.random())})}function c(a,b){h.isFunction(b)||(b=function(){}),s.push({identifiers:a,callback:b}),d()}function d(){if(!t){var a=s.shift();if(a){t=!0;var c=a.identifiers,f=a.callback,g=!1;do{if(e.getPrivacyStatus()!==e.PRIVACY_STATUS_OPT_IN){r.debug("Not syncing ID. Privacy is not set to opted in."),f(null);break}if(!e.visitorIDServiceEnabled()){f(null);break}var i=ADBMobile_platform.getTimeSince1970()-q>p;if(m&&!c&&!i){f(m);break}g=!0}while(!1);if(!g)return t=!1,void d();var j=e.marketingCloudOrganizationIdentifier(),k=e.ssl()?"https":"http";k+="://"+u+"/id?d_rtbd=json&d_ver=2&d_orgid="+j,n&&(k+=h.serializeKeyValuePair("d_blob",n)),m&&(k+=h.serializeKeyValuePair("d_mid",m)),o&&(k+=h.serializeKeyValuePair("dcs_region",o)),c&&Object.keys(c).forEach(function(a){k+="&d_cid_ic="+encodeURIComponent(a)+"%01"+encodeURIComponent(this[a])},c),r.debug("Sending id sync call ("+k+")"),ADBMobile_platform.httpRequestAsync(k,"GET",{},null,2e3,function(a,c){if(e.getPrivacyStatus()!==e.PRIVACY_STATUS_OPT_IN)r.debug("Dropping response as privacy is not set to opted in."),f(null);else{do{if(200!==a){r.error("Failed id sync call ("+a+")");break}if(!c){r.error("Blank response from id sync call");break}r.debug("Received response from server ("+c+")");var g;try{g=JSON.parse(c)}catch(h){g=null}g?g.error_msg?r.error("Error received from server("+g.error_msg+")"):g.d_mid?(m=g.d_mid,n=g.d_blob,o=g.dcs_region,p=g.id_sync_ttl||0):(m=b(),n=null,o=null,p=600):r.error("Unable to parse response("+c+")")}while(!1);q=ADBMobile_platform.getTimeSince1970(),ADBMobile_platform.writeValue("adb_visitor_mid",m),ADBMobile_platform.writeValue("adb_visitor_blob",n),ADBMobile_platform.writeValue("adb_visitor_hint",o),ADBMobile_platform.writeValue("adb_visitor_ttl",p),ADBMobile_platform.writeValue("adb_visitor_sync",q),f(m)}t=!1,d()})}}}function f(a){c(null,a)}function i(){return m?"?mid="+m+"&mcorgid="+e.marketingCloudOrganizationIdentifier():""}function j(){var a={};return m?(a.mid=m,n&&(a.aamb=n),o&&(a.aamlh=o),a):a}function k(){var a="";return m?(a+=h.serializeKeyValuePair("d_mid",m),n&&(a+=h.serializeKeyValuePair("d_blob",n)),o&&(a+=h.serializeKeyValuePair("dcs_region",o)),a):a}function l(){m=null,n=null,o=null,p=null,q=null,ADBMobile_platform.writeValue("adb_visitor_mid",""),ADBMobile_platform.writeValue("adb_visitor_blob",""),ADBMobile_platform.writeValue("adb_visitor_hint",""),ADBMobile_platform.writeValue("adb_visitor_ttl",""),ADBMobile_platform.writeValue("adb_visitor_sync","")}var m,n,o,p,q,r=g.instanceWithTag("Id Service"),s=[],t=!1,u="dpm.demdex.net";return{init:a,getMarketingCloudIDAsync:f,idSync:c,getAnalyticsParameters:j,getAnalyticsIDRequestParameterString:i,getAAMParameterString:k,purgeVisitorIdService:l}}(),k={},l=function(){"use strict";function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function c(a,c,d){return c&&b(a.prototype,c),d&&b(a,d),a}var d=Object.freeze({AnalyticsTrackingServer:"analyticstrackingserver",AnalyticsSsl:"analyticsssl",Rsid:"rsid",Vid:"vid",Aid:"aid",Mcid:"mid",McOrgId:"orgid",AamLocHint:"aamlochint",CustomerIds:"customerids",MediaTrackingServer:"mediatrackingserver",MediaChannel:"mediachannel",MediaPlayerName:"mediaplayername",MediaAppVersion:"mediaappversion",MediaSsl:"mediassl"}),e=Object.freeze({Get:"GET",Post:"POST"}),f=Object.freeze({Log:"log",Info:"info",Warn:"warn",Error:"error"}),g=Object.freeze({OptOut:"optout",OptIn:"optin",OptUnknown:"optunknown"}),h=function(){function b(){a(this,b)}return c(b,[{key:"resolveKeys",value:function(){throw new Error("Implementation error: Method must be overridden.")}},{key:"isReady",value:function(){}},{key:"getPrivacyStatus",value:function(){}},{key:"notifyPrivacyChange",value:function(){}}]),b}(),i=function(){throw new Error("Platform function not implementated")};return{LogType:f,HttpMethod:e,Platform:{logMessage:i,getTimeMilliseconds:i,createTimer:i,destroyTimer:i,sendRequest:i},ECResolver:h,ECResolverKeys:d,PrivacyStatus:g}}(),m=function(a,b,c){"use strict";function d(a){"@babel/helpers - typeof";return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function g(a,b,c){return b&&f(a.prototype,b),c&&f(a,c),a}function h(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function i(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function j(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?i(Object(c),!0).forEach(function(b){h(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):i(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function k(){var a=0;return{getUniqueId:function(){return a+=1}}}function l(a){var b=a.debugLogging;R(b)&&(U=b)}function m(a,c,d){(U||a===Q.Error)&&b.logMessage(a,c+" "+d)}function n(a,b){m(Q.Log,a,b)}function o(a,b){m(Q.Info,a,b)}function p(a,b){m(Q.Warn,a,b)}function q(a,b){m(Q.Error,a,b)}function r(a){var b=T(a)?"["+a+"]":"";return{log:function(a){n(b,a)},info:function(a){o(b,a)},warn:function(a){p(b,a)},error:function(a){q(b,a)}}}function s(a){var b={};return la(a)&&Object.keys(a).forEach(function(c){var d=a[c],e=d.id,f=d.authState,g=void 0===f?0:f;T(e)&&(b[c]={id:e,authState:g})}),b}function t(a){var b,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=h({},ga.EventType,a.eventType);e[ga.PlayerTime]=(b={},h(b,ha.Playhead,a.playhead),h(b,ha.Ts,a.ts),b),ia(a.customMetadata)||(e[ga.CustomMetadata]=a.customMetadata),ia(a.qoeData)||(e[ga.QoE]=a.qoeData);var f=j({},a.params);if(a.eventType===X.SessionStart){T(d[V.AnalyticsTrackingServer])&&(f[_.AnalyticsTrackingServer]=d[V.AnalyticsTrackingServer]),T(d[V.Rsid])&&(f[_.AnalyticsRsid]=d[V.Rsid]),R(d[V.AnalyticsSsl])&&(f[_.AnalyticsSsl]=d[V.AnalyticsSsl]),T(d[V.Vid])&&(f[_.AnalyticsVisitorId]=d[V.Vid]),T(d[V.Aid])&&(f[_.AnalyticsAid]=d[V.Aid]),T(d[V.McOrgId])&&(f[_.VisitorMcOrgId]=d[V.McOrgId]),T(d[V.Mcid])&&(f[_.VisitorMcuserId]=d[V.Mcid]),ka(d[V.AamLocHint])&&(f[_.VisitorAamLocHint]=d[V.AamLocHint]);var g=s(d[V.CustomerIds]);if(la(g)&&!ia(g)&&(f[_.VisitorCustomerIds]=g),!T(f[$.Channel])){var i=d[V.MediaChannel];f[$.Channel]=T(i)?i:"unknown"}var k=d[V.MediaPlayerName];f[$.PlayerName]=T(k)?k:"unknown",T(d[V.MediaAppVersion])&&(f[$.SdkVersion]=d[V.MediaAppVersion]),f[_.MediaVersion]=c}else if(a.eventType===X.AdStart){var l=d[V.MediaPlayerName];f[ca.PlayerName]=T(l)?l:"unknown"}return ia(f)||(e[ga.Params]=f),na(function(){return JSON.stringify(e)},"")}function u(a){return(a[V.MediaSsl]?"https":"http")+"://"+a[V.MediaTrackingServer]+"/api/v1/sessions"}function v(a,b){return(a[V.MediaSsl]?"https":"http")+"://"+a[V.MediaTrackingServer]+"/api/v1/sessions/"+b+"/events"}function w(a){try{var b=a.split("/");return b[4]?b[4]:""}catch(c){return""}}function x(a,b,c,d,e){var f=null;try{f=new Wa({id:b,name:a,streamType:d,mediaType:e,length:c}).serialize()}catch(g){ab.error("Error creating MediaObject ("+g.message+")")}return f}function y(a,b,c){var d=null;try{d=new Fa({name:a,position:b,startTime:c}).serialize()}catch(e){ab.error("Error creating AdBreakObject ("+e.message+")")}return d}function z(a,b,c,d){var e=null;try{e=new Ba({id:b,name:a,position:c,length:d}).serialize()}catch(f){ab.error("Error creating AdObject ("+f.message+")")}return e}function A(a,b,c,d){var e=null;try{e=new Ka({name:a,position:b,length:c,startTime:d}).serialize()}catch(f){ab.error("Error creating ChapterObject ("+f.message+")")}return e}function B(a,b,c,d){var e=null;try{e=new _a({bitrate:a,droppedFrames:d,fps:c,startupTime:b}).serialize()}catch(f){ab.error("Error creating QoEObject ("+f.message+")")}return e}function C(a){var b=null;try{b=new Na({name:a}).serialize()}catch(c){ab.error("Error creating StateObject ("+c.message+")")}return b}function D(a){Ab.configure(a)}function E(a){var b="tracker"+Bb.getUniqueId();return new zb(Ab,b,a)}function F(){l({debugLogging:!0});try{Cb.configure(a)}catch(b){}}a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;"default"in b&&b.default;c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c;var G=Object.freeze({AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"}),H=Object.freeze({MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"}),I=Object.freeze({Video:"video",Audio:"audio"}),J=Object.freeze({FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"}),K=Object.freeze({Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"}),L=Object.freeze({Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"}),M=Object.freeze({Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"}),N=Object.freeze({VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"}),O=Object.freeze({OptOut:"optout",OptIn:"optin",OptUnknown:"optunknown"}),P=function(a){return null==a},Q=Object.freeze({Log:"log",Info:"info",Warn:"warn",Error:"error"}),R=function(a){return"boolean"==typeof a},S=function(a){return"string"==typeof a},T=function(a){return S(a)&&a.length>0},U=!1,V=Object.freeze({AnalyticsTrackingServer:"analyticstrackingserver",AnalyticsSsl:"analyticsssl",Rsid:"rsid",Vid:"vid",Aid:"aid",Mcid:"mid",McOrgId:"orgid",AamLocHint:"aamlochint",CustomerIds:"customerids",MediaTrackingServer:"mediatrackingserver",MediaChannel:"mediachannel",MediaPlayerName:"mediaplayername",MediaAppVersion:"mediaappversion",MediaSsl:"mediassl"}),W=Object.freeze({Get:"GET",Post:"POST"}),X=Object.freeze({SessionStart:"sessionStart",SessionComplete:"sessionComplete",SessionEnd:"sessionEnd",AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",Play:"play",Ping:"ping",BufferStart:"bufferStart",PauseStart:"pauseStart",BitrateChange:"bitrateChange",Error:"error",StateStart:"stateStart",StateEnd:"stateEnd"}),Y=Object.freeze({Show:"media.show",Season:"media.season",Episode:"media.episode",AssetId:"media.assetId",Genre:"media.genre",FirstAirDate:"media.firstAirDate",FirstDigitalDate:"media.firstDigitalDate",Rating:"media.rating",Originator:"media.originator",Network:"media.network",ShowType:"media.showType",AdLoad:"media.adLoad",MVPD:"media.pass.mvpd",Auth:"media.pass.auth",DayPart:"media.dayPart",Feed:"media.feed",StreamFormat:"media.streamFormat",Artist:"media.artist",Album:"media.album",Label:"media.label",Author:"media.author",Station:"media.station",Publisher:"media.publisher"}),Z=Object.freeze({Advertiser:"media.ad.advertiser",CampaignId:"media.ad.campaignId",CreativeId:"media.ad.creativeId",SiteId:"media.ad.siteId",CreativeUrl:"media.ad.creativeURL",PlacementId:"media.ad.placementId"}),$=Object.freeze({Id:"media.id",Name:"media.name",Length:"media.length",ContentType:"media.contentType",StreamType:"media.streamType",PlayerName:"media.playerName",Resume:"media.resume",Channel:"media.channel",Publisher:"media.publisher",SdkVersion:"media.sdkVersion"}),_=Object.freeze({AppInstallationId:"appInstallationId",AnalyticsTrackingServer:"analytics.trackingServer",AnalyticsRsid:"analytics.reportSuite",AnalyticsSsl:"analytics.enableSSL",AnalyticsVisitorId:"analytics.visitorId",AnalyticsAid:"analytics.aid",VisitorMcOrgId:"visitor.marketingCloudOrgId",VisitorMcuserId:"visitor.marketingCloudUserId",VisitorAamLocHint:"visitor.aamLocationHint",VisitorCustomerIds:"visitor.customerIDs",VisitorCustomerKeyId:"id",VisitorCustomerKeyAuthState:"authState",MediaVersion:"media.libraryVersion"}),aa=Object.freeze({Channel:"media.channel"}),ba=Object.freeze({PodFriendlyName:"media.ad.podFriendlyName",PodIndex:"media.ad.podIndex",PodSecond:"media.ad.podSecond"}),ca=Object.freeze({Name:"media.ad.name",Id:"media.ad.id",Length:"media.ad.length",PodPosition:"media.ad.podPosition",PlayerName:"media.ad.playerName"}),da=Object.freeze({FriendlyName:"media.chapter.friendlyName",Length:"media.chapter.length",Offset:"media.chapter.offset",Index:"media.chapter.index"}),ea=Object.freeze({StateName:"media.state.name"}),fa=Object.freeze({Bitrate:"media.qoe.bitrate",DroppedFrames:"media.qoe.droppedFrames",Fps:"media.qoe.framesPerSecond",StartupTime:"media.qoe.timeToStart",ErrorId:"media.qoe.errorID",ErrorSource:"media.qoe.errorSource",ErrorSourcePlayer:"player",ErrorSourceExternal:"external"}),ga=Object.freeze({EventType:"eventType",Params:"params",QoE:"qoeData",CustomMetadata:"customMetadata",PlayerTime:"playerTime"}),ha=Object.freeze({Playhead:"playhead",Ts:"ts"}),ia=function(a){return 0===Object.keys(a).length},ja=function(a){return"number"==typeof a&&!isNaN(a)},ka=function(a){var b=parseInt(a,10);return ja(b)&&a===b},la=function(a){return!P(a)&&!Array.isArray(a)&&"object"===d(a)},ma=function(a){return"function"==typeof a},na=function(a,b){if(!ma(a))return b;try{return a()}catch(c){return b}},oa=[V.AnalyticsTrackingServer,V.AnalyticsSsl,V.Rsid,V.Vid,V.Aid,V.Mcid,V.McOrgId,V.AamLocHint,V.CustomerIds,V.MediaChannel,V.MediaAppVersion,V.MediaPlayerName,V.MediaTrackingServer,V.MediaSsl],pa=201,qa=3,ra=3,sa={"Content-Type":"application/json"},ta=function(){function a(b){e(this,a),this._logger=r("MediaSession("+b+")"),this._hits=[],this._ecParams=null,this._sessionId=null,this._creatingMCSession=!1,this._createSessionFailureCount=0,this._internalError=!1,this._doneQueuing=!1}return g(a,[{key:"queue",value:function(a){
this._internalError||this._doneQueuing||this._hits.push(a)}},{key:"process",value:function(a){this._internalError||0!==this._hits.length&&a.isReady()&&(this._ecParams||(this._ecParams=a.resolveKeys(oa)),P(this._sessionId)?this._startMCSession():this._flushPendingHits())}},{key:"end",value:function(){this._logger.log("end"),this._doneQueuing=!0}},{key:"abort",value:function(){this._logger.log("abort"),this._doneQueuing=!0,this._hits=[]}},{key:"doneProcessing",value:function(){return this._internalError||this._doneQueuing&&0===this._hits.length}},{key:"_startMCSession",value:function(){var a=this;if(!this._creatingMCSession){var b=this._hits[0];if(b.eventType!==X.SessionStart)return this._logger.log("Dropping hit("+b.eventType+") as we expected sessionStart"),void this._hits.shift();var c=u(this._ecParams),d=t(b,this._ecParams);this._creatingMCSession=!0,this._sendRequest(c,W.Post,sa,d,function(b,c){var d,e=!1;do{if(b!==pa)break;var f=c.location;if(!T(f))break;if(!(d=w(f)))break;e=!0}while(!1);e?(a._logger.log("Media collection session created with session id :  "+d),a._sessionId=d,a._hits.shift()):(a._logger.log("Creating Media collection session failed"),a._createSessionFailureCount+=1,a._createSessionFailureCount>=ra&&(a._logger.log("Internal error: Creating Media collection session failed "+ra+" times"),a._internalError=!0)),a._creatingMCSession=!1})}}},{key:"_flushPendingHits",value:function(){var a=this;this._hits.splice(0,qa).forEach(function(b){var c=v(a._ecParams,a._sessionId),d=t(b,a._ecParams);a._sendRequest(c,W.Post,sa,d,function(){})})}},{key:"_sendRequest",value:function(a,c,d,e,f){b.sendRequest(a,c,d,e,f)}}]),a}(),ua=-1,va=500,wa=function(){function a(){e(this,a),this._logger=r("MediaProcessor"),this._isConfigured=!1,this._privacyStatus=O.OptUnknown,this._sessionIdGenerator=k(),this._sessionMap={}}return g(a,[{key:"configure",value:function(a){var c=this;this._isConfigured||(this._ecResolver=a,this._privacyStatus=this._ecResolver.getPrivacyStatus(),this._ecResolver.notifyPrivacyChange(this._onPrivacyChange.bind(this)),this._isConfigured=!0,this._processSessionTimer=b.createTimer(function(){c._tick()},va),this._logger.log("Configured with resolver"))}},{key:"startSession",value:function(){if(this._privacyStatus===O.OptOut)return this._logger.log("Privacy is opted out. Not starting a session"),ua;var b=this._sessionIdGenerator.getUniqueId();return this._sessionMap[b]=a._createMediaSession(b),b}},{key:"processHit",value:function(a,b){if(a!==ua){var c=this._sessionMap[a];P(c)||(this._logger.log("Process hit for session("+a+") => "+b),c.queue(b))}}},{key:"endSession",value:function(a){if(a!==ua){var b=this._sessionMap[a];P(b)||b.end()}}},{key:"_tick",value:function(){var a=this;Object.keys(this._sessionMap).forEach(function(b){var c=a._sessionMap[b];c.process(a._ecResolver),c.doneProcessing()&&(a._logger.log("Removing session "+b+" from store as it has finished processing"),delete a._sessionMap[b])})}},{key:"_onPrivacyChange",value:function(a){var b=this;this._logger.log("Privacy switched to "+a),this._privacyStatus=a,a===O.OptOut&&(this._logger.log("Aborting all active sessions"),Object.keys(this._sessionMap).forEach(function(a){b._sessionMap[a].abort()}))}}],[{key:"_createMediaSession",value:function(a){return new ta(a)}}]),a}(),xa="ad.id",ya="ad.name",za="ad.position",Aa="ad.length",Ba=function(){function a(b){var c=b.id,d=b.name,f=b.position,g=b.length;if(e(this,a),!T(c))throw new TypeError("id is not a valid string");if(!T(d))throw new TypeError("name is not a valid string");if(!ka(f)||f<1)throw new TypeError("position should be a valid integer greater than zero");if(!ja(g)||g<0)throw new TypeError("length cannot be less than zero");this.id=c,this.name=d,this.position=f,this.length=g}return g(a,[{key:"equal",value:function(b){return!P(b)&&b instanceof a&&(this.id===b.id&&this.name===b.name&&this.position===b.position&&this.length===b.length)}},{key:"serialize",value:function(){var a;return a={},h(a,xa,this.id),h(a,ya,this.name),h(a,za,this.position),h(a,Aa,this.length),a}}],[{key:"deserialize",value:function(b){return la(b)?na(function(){return new a({id:b[xa],name:b[ya],position:b[za],length:b[Aa]})},null):null}}]),a}(),Ca="adbreak.name",Da="adbreak.position",Ea="adbreak.starttime",Fa=function(){function a(b){var c=b.name,d=b.position,f=b.startTime;if(e(this,a),!T(c))throw new TypeError("name is not a valid string");if(!ka(d)||d<1)throw new TypeError("position should be a valid integer greater than zero");if(!ja(f)||f<0)throw new TypeError("startTime cannot be less than zero");this.name=c,this.position=d,this.startTime=f}return g(a,[{key:"equal",value:function(b){return!P(b)&&b instanceof a&&(this.name===b.name&&this.position===b.position&&this.startTime===b.startTime)}},{key:"serialize",value:function(){var a;return a={},h(a,Ca,this.name),h(a,Da,this.position),h(a,Ea,this.startTime),a}}],[{key:"deserialize",value:function(b){return la(b)?na(function(){return new a({name:b[Ca],position:b[Da],startTime:b[Ea]})},null):null}}]),a}(),Ga="chapter.name",Ha="chapter.position",Ia="chapter.starttime",Ja="chapter.length",Ka=function(){function a(b){var c=b.name,d=b.position,f=b.startTime,g=b.length;if(e(this,a),!T(c))throw new TypeError("name is not a valid string");if(!ka(d)||d<1)throw new TypeError("position should be a valid integer greater than zero");if(!ja(f)||f<0)throw new TypeError("startTime cannot be less than zero");if(!ja(g)||g<0)throw new TypeError("length cannot be less than zero");this.name=c,this.position=d,this.startTime=f,this.length=g}return g(a,[{key:"equal",value:function(b){return!P(b)&&b instanceof a&&(this.name===b.name&&this.position===b.position&&this.startTime===b.startTime&&this.length===b.length)}},{key:"serialize",value:function(){var a;return a={},h(a,Ga,this.name),h(a,Ha,this.position),h(a,Ia,this.startTime),h(a,Ja,this.length),a}}],[{key:"deserialize",value:function(b){return la(b)?na(function(){return new a({name:b[Ga],position:b[Ha],startTime:b[Ia],length:b[Ja]})},null):null}}]),a}(),La="customstate.name",Ma=new RegExp("^[a-zA-Z0-9_\\.]{1,64}$"),Na=function(){function a(b){var c=b.name;if(e(this,a),!T(c))throw new TypeError("name is not a valid string");if(!Ma.test(c))throw new TypeError("name should match '^[a-zA-Z0-9_\\.]{1,64}$' pattern");this.name=c}return g(a,[{key:"equal",value:function(b){return!P(b)&&b instanceof a&&this.name===b.name}},{key:"serialize",value:function(){return h({},La,this.name)}}],[{key:"deserialize",value:function(b){return la(b)?na(function(){return new a({name:b[La]})},null):null}}]),a}(),Oa="media.id",Pa="media.name",Qa="media.streamtype",Ra="media.type",Sa="media.length",Ta="media.resumed",Ua="media.prerollwaittime",Va="media.granularadtracking",Wa=function(){function a(b){var c=b.id,d=b.name,f=b.streamType,g=b.mediaType,h=b.length,i=b.resumed,j=b.prerollWaitTime,k=b.granularAdTracking;if(e(this,a),!T(c))throw new TypeError("id is not a valid string");if(!T(d))throw new TypeError("name is not a valid string");if(!T(f))throw new TypeError("streamType is not a valid string");if(!ja(h)||h<0)throw new TypeError("length cannot be less than zero");this.id=c,this.name=d,this.streamType=f,this.mediaType=g!==I.Audio?I.Video:g,this.length=h,this.resumed=!!R(i)&&i,this.prerollWaitTime=!ka(j)||j<0?250:j,this.granularAdTracking=!!R(k)&&k}return g(a,[{key:"equal",value:function(b){return!P(b)&&b instanceof a&&(this.id===b.id&&this.name===b.name&&this.streamType===b.streamType&&this.mediaType===b.mediaType&&this.length===b.length&&this.resumed===b.resumed&&this.prerollWaitTime===b.prerollWaitTime&&this.granularAdTracking===b.granularAdTracking)}},{key:"serialize",value:function(){var a;return a={},h(a,Oa,this.id),h(a,Pa,this.name),h(a,Qa,this.streamType),h(a,Ra,this.mediaType),h(a,Sa,this.length),h(a,Ta,this.resumed),h(a,Ua,this.prerollWaitTime),h(a,Va,this.granularAdTracking),a}}],[{key:"deserialize",value:function(b){return la(b)?na(function(){return new a({id:b[Oa],name:b[Pa],streamType:b[Qa],mediaType:b[Ra],length:b[Sa],resumed:b[Ta],prerollWaitTime:b[Ua],granularAdTracking:b[Va]})},null):null}}]),a}(),Xa="qoe.bitrate",Ya="qoe.droppedframes",Za="qoe.fps",$a="qoe.startuptime",_a=function(){function a(b){var c=b.bitrate,d=b.droppedFrames,f=b.fps,g=b.startupTime;if(e(this,a),!ja(c)||c<0)throw new TypeError("bitrate must not be less than zero");if(!ja(d)||d<0)throw new TypeError("dropped frames must not be less than zero");if(!ja(f)||f<0)throw new TypeError("fps must not be less than zero");if(!ja(g)||g<0)throw new TypeError("startupTime must not be less than zero");this.bitrate=c,this.droppedFrames=d,this.fps=f,this.startupTime=g}return g(a,[{key:"equal",value:function(b){return!P(b)&&b instanceof a&&(this.bitrate===b.bitrate&&this.droppedFrames===b.droppedFrames&&this.fps===b.fps&&this.startupTime===b.startupTime)}},{key:"serialize",value:function(){var a;return a={},h(a,Xa,this.bitrate),h(a,Ya,this.droppedFrames),h(a,Za,this.fps),h(a,$a,this.startupTime),a}}],[{key:"deserialize",value:function(b){return la(b)?na(function(){return new a({bitrate:b[Xa],droppedFrames:b[Ya],fps:b[Za],startupTime:b[$a]})},null):null}}]),a}(),ab=r("Media"),bb=function(a){try{return JSON.stringify(a,null,4)}catch(b){return"[Error formatting object]"}},cb=Object.freeze({Name:"event.name",Params:"event.params",Metadata:"event.metadata",TimeStamp:"event.ts",InternalEvent:"event.internal",Playhead:"event.playhead",ErrorId:"error.id"}),db=Object.freeze(j({SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pause",Error:"error",QoEUpdate:"qoeUpdate",PlayheadUpdate:"playheadUpdate"},G)),eb=function(){function a(b,c){if(e(this,a),P(b))throw new Error("id is not valid");this.id=b,this.description=c,this.predicates=[],this.actions=[]}return g(a,[{key:"addPredicate",value:function(a,b,c){if(!ma(a))throw new Error("predicate is not a function");return this.predicates.push({predicate:a,val:b,message:c}),this}},{key:"addAction",value:function(a){if(!ma(a))throw new Error("action is not a function");return this.actions.push(a),this}},{key:"runPredicates",value:function(a){for(var b=0;b<this.predicates.length;++b){var c=this.predicates[b];if(c.predicate(a)!==c.val)return{success:!1,message:c.message}}return{success:!0,message:""}}},{key:"runActions",value:function(a){for(var b=0;b<this.actions.length;++b){if(!(0,this.actions[b])(a))return!1}return!0}}]),a}(),fb="Matching rule is not found",gb="RuleEngine",hb=function(){function a(b){if(e(this,a),!b)throw new Error("RuleEngine needs a logger");this.logger=b,this.rules={}}return g(a,[{key:"setEnterAction",value:function(a){if(!ma(a))throw new Error("enterAction is not a function");this.enterAction=a}},{key:"setExitAction",value:function(a){if(!ma(a))throw new Error("exitAction is not a function");this.exitAction=a}},{key:"addRule",value:function(a){if(!(a instanceof eb))throw new Error("rule is not valid");this.rules[a.id]=a}},{key:"processRule",value:function(a,b){var c=this.rules[a];if(!c)return{success:!1,message:fb};var d=c.runPredicates(b);do{if(!d.success){this.logger.log(gb+": Predicates failed for rule "+c.description+" : "+d.message);break}if(this.enterAction&&!this.enterAction(c,b)){this.logger.log(gb+": Enter action prevents further processing for rule "+c.description);break}if(!c.runActions(b)){this.logger.log(gb+": Rule action prevents further processing for rule "+c.description);break}this.exitAction&&this.exitAction(c,b)}while(!1);return d}}]),a}(),ib=Object.freeze({Init:0,Play:1,Pause:2,Buffer:3,Seek:4,Stall:5}),jb=function(){function a(b,c){e(this,a),this._mediaInfo=b,this._mediaMetadata=c,this._adBreakInfo=null,this._adInfo=null,this._adMetadata=null,this._chapterInfo=null,this._chapterMetadata=null,this._qoeInfo=null,this._playhead=0,this._playstate=ib.Init,this._buffering=!1,this._seeking=!1,this._customStates=new Map}return g(a,[{key:"setAdBreakInfo",value:function(a){this._adBreakInfo=a}},{key:"clearAdBreakInfo",value:function(){this._adBreakInfo=null}},{key:"setAdInfo",value:function(a,b){this._adInfo=a,this._adMetadata=b}},{key:"clearAdInfo",value:function(){this._adInfo=null,this._adMetadata=null}},{key:"setChapterInfo",value:function(a,b){this._chapterInfo=a,this._chapterMetadata=b}},{key:"clearChapterInfo",value:function(){this._chapterInfo=null,this._chapterMetadata=null}},{key:"enterPlaybackState",value:function(a){switch(a){case ib.Play:case ib.Pause:case ib.Stall:this._playstate=a;break;case ib.Buffer:this._buffering=!0;break;case ib.Seek:this._seeking=!0}}},{key:"exitPlaybackState",value:function(a){switch(a){case ib.Buffer:this._buffering=!1;break;case ib.Seek:this._seeking=!1}}},{key:"isInPlaybackState",value:function(a){var b=!1;switch(a){case ib.Init:case ib.Play:case ib.Pause:case ib.Stall:b=this._playstate===a;break;case ib.Buffer:b=this._buffering;break;case ib.Seek:b=this._seeking}return b}},{key:"isIdle",value:function(){return!this.isInPlaybackState(ib.Play)||this.isInPlaybackState(ib.Seek)||this.isInPlaybackState(ib.Buffer)}},{key:"startCustomState",value:function(a){this._customStates.set(a.name,a)}},{key:"endCustomState",value:function(a){this._customStates.set(a.name,null)}},{key:"isCustomStateActive",value:function(a){return!!this._customStates.get(a.name)}},{key:"getActiveCustomStates",value:function(){var a=[];return this._customStates.forEach(function(b){b&&a.push(b)}),a}},{key:"hasTrackedCustomState",value:function(a){return this._customStates.has(a.name)}},{key:"numTrackedCustomStates",value:function(){return this._customStates.size}},{key:"mediaInfo",get:function(){return this._mediaInfo}},{key:"mediaMetadata",get:function(){return this._mediaMetadata}},{key:"isInAdBreak",get:function(){return!!this._adBreakInfo}},{key:"adBreakInfo",get:function(){return this._adBreakInfo}},{key:"isInAd",get:function(){return!!this._adInfo}},{key:"adInfo",get:function(){return this._adInfo}},{key:"adMetadata",get:function(){return this._adMetadata}},{key:"isInChapter",get:function(){return!!this._chapterInfo}},{key:"chapterInfo",get:function(){return this._chapterInfo}},{key:"chapterMetadata",get:function(){return this._chapterMetadata}},{key:"qoeInfo",get:function(){return this._qoeInfo},set:function(a){this._qoeInfo=a}},{key:"playhead",get:function(){return this._playhead},set:function(a){this._playhead=a}}]),a}(),kb=function(){function a(b){var c=b.eventType,d=b.params,f=b.customMetadata,g=b.qoeData,h=b.playhead,i=b.ts;if(e(this,a),!S(c))throw new Error("eventType should be a valid string");if(!ja(h))throw new Error("playhead should be a valid number");if(!ka(i)||i<0)throw new Error("ts should be a valid positive integer");this.eventType=c,this.params=la(d)?d:{},this.customMetadata=la(f)?f:{},this.qoeData=la(g)?g:{},this.playhead=h,this.ts=i}return g(a,[{key:"toString",value:function(){return bb(this)}}]),a}(),lb=1e4,mb=1e3,nb=function(){function a(b,c,d,f,g){e(this,a),this._logger=b,this._hitProcessor=c,this._config=d,this._media=f,this._refTs=g,this._previousState=ib.Init,this._previousStateTs=g,this._interval=lb,this._lastQoeInfo=null,this._startSession()}return g(a,[{key:"setRefTS",value:function(a){this._refTs=a}},{key:"processMediaStart",value:function(){this._processMediaStart(!1)}},{key:"processMediaComplete",value:function(){this._generateHit(X.SessionComplete),this._endSession()}},{key:"processMediaSkip",value:function(){this._generateHit(X.SessionEnd),this._endSession()}},{key:"processAdBreakStart",value:function(){var b=a._extractAdBreakParams(this._media);this._generateHit(X.AdBreakStart,b,{})}},{key:"processAdBreakComplete",value:function(){this._generateHit(X.AdBreakComplete)}},{key:"processAdBreakSkip",value:function(){this._generateHit(X.AdBreakComplete)}},{key:"processAdStart",value:function(){a._isGranularAdTrackingEnabled(this._media)&&(this._interval=mb);var b=a._extractAdParams(this._media),c=a._extractAdMetadata(this._media);this._generateHit(X.AdStart,b,c)}},{key:"processAdComplete",value:function(){this._interval=lb,this._generateHit(X.AdComplete)}},{key:"processAdSkip",value:function(){this._interval=lb,this._generateHit(X.AdSkip)}},{key:"processChapterStart",value:function(){var b=a._extractChapterParams(this._media),c=a._extractChapterMetadata(this._media);this._generateHit(X.ChapterStart,b,c)}},{key:"processChapterComplete",value:function(){this._generateHit(X.ChapterComplete)}},{key:"processChapterSkip",value:function(){this._generateHit(X.ChapterSkip)}},{key:"processCustomStateStart",value:function(a){var b={};b[ea.StateName]=a.name,this._generateHit(X.StateStart,b,{},{})}},{key:"processCustomStateEnd",value:function(a){var b={};b[ea.StateName]=a.name,this._generateHit(X.StateEnd,b,{},{})}},{key:"processSessionAbort",value:function(){this.processMediaSkip()}},{key:"processSessionRestart",value:function(){this._previousState=ib.Init,this._previousStateTs=this._refTs,this._lastQoeInfo=null,this._startSession(),this.processMediaStart(!0),this._media.isInChapter&&this.processChapterStart(),this._media.isInAdBreak&&this.processAdBreakStart(),this._media.isInAd&&this.processAdStart();var a,b=this._media.getActiveCustomStates();for(a=0;a<b.length;a++)this.processCustomStateStart(b[a]);this.processPlayback(!0)}},{key:"processBitrateChange",value:function(){var b=a._extractQoeData(this._media);this._generateHit(X.BitrateChange,{},{},b)}},{key:"processError",value:function(b){var c=a._extractQoeData(this._media);c[fa.ErrorId]=b,c[fa.ErrorSource]=fa.ErrorSourcePlayer,this._generateHit(X.Error,{},{},c)}},{key:"processPlayback",value:function(b){if(this._isTracking){var c=this._getPlaybackState();if(this._previousState!==c||b){var d=a._playbackStateToMediaCollectionEvent(c);this._generateHit(d),this._previousState=c,this._previousStateTs=this._refTs}else c===this._previousState&&this._refTs-this._previousStateTs>=this._interval&&(this._generateHit(X.Ping),this._previousStateTs=this._refTs)}}},{key:"_processMediaStart",value:function(b){var c={};c=a._extractMediaParams(this._media),b&&(c[$.Resume]=!0);var d=this._config[aa.Channel];T(d)&&(c[aa.Channel]=d);var e=a._extractMediaMetadata(this._media);this._generateHit(X.SessionStart,c,e)}},{key:"_generateHit",value:function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=e;if(P(f)){var g=this._media.qoeInfo;!(P(g)||!P(this._lastQoeInfo)&&this._lastQoeInfo.equal(g))&&(f=a._extractQoeData(this._media),this._lastQoeInfo=g)}if(!this._isTracking)return void this._logger.log("#_generateHit - Dropping hit as we have internally stopped tracking the session");var h=this._media.playhead,i=this._refTs,j=new kb({eventType:b,params:c,customMetadata:d,qoeData:f,playhead:h,ts:i});this._hitProcessor.processHit(this._sessionId,j)}},{key:"_getPlaybackState",value:function(){return this._media.isInPlaybackState(ib.Buffer)?ib.Buffer:this._media.isInPlaybackState(ib.Seek)?ib.Seek:this._media.isInPlaybackState(ib.Play)?ib.Play:this._media.isInPlaybackState(ib.Pause)?ib.Pause:this._media.isInPlaybackState(ib.Stall)?ib.Stall:ib.Init}},{key:"_startSession",value:function(){this._sessionId=this._hitProcessor.startSession(),this._isTracking=!0,this._logger.log("Start internal session("+this._sessionId+")")}},{key:"_endSession",value:function(){this._hitProcessor.endSession(this._sessionId),this._isTracking=!1,this._logger.log("End internal session("+this._sessionId+")")}}],[{key:"_isGranularAdTrackingEnabled",value:function(a){var b=a.mediaInfo;return!P(b)&&b.granularAdTracking}},{key:"_extractMediaParams",value:function(b){var c={},d=b.mediaInfo;P(d)||(c[$.Id]=d.id,c[$.Name]=d.name,c[$.Length]=d.length,c[$.ContentType]=d.streamType,c[$.StreamType]=d.mediaType,c[$.Resume]=d.resumed);var e=b.mediaMetadata;return la(e)&&Object.keys(e).forEach(function(b){if(a._standardMediaMetadataMap.has(b)){var d=a._standardMediaMetadataMap.get(b);c[d]=e[b]}}),c}},{key:"_extractMediaMetadata",value:function(b){var c={},d=b.mediaMetadata;return la(d)&&Object.keys(d).forEach(function(b){a._standardMediaMetadataMap.has(b)||(c[b]=d[b])}),c}},{key:"_extractAdBreakParams",value:function(a){var b={},c=a.adBreakInfo;return P(c)||(b[ba.PodFriendlyName]=c.name,b[ba.PodIndex]=c.position,b[ba.PodSecond]=c.startTime),b}},{key:"_extractAdParams",value:function(b){var c={},d=b.adInfo;P(d)||(c[ca.Name]=d.name,c[ca.Id]=d.id,c[ca.Length]=d.length,c[ca.PodPosition]=d.position);var e=b.adMetadata;return la(e)&&Object.keys(e).forEach(function(b){if(a._standardAdMetadataMap.has(b)){var d=a._standardAdMetadataMap.get(b);c[d]=e[b]}}),c}},{key:"_extractAdMetadata",value:function(b){var c={},d=b.adMetadata;return la(d)&&Object.keys(d).forEach(function(b){a._standardAdMetadataMap.has(b)||(c[b]=d[b])}),c}},{key:"_extractChapterParams",value:function(a){var b={},c=a.chapterInfo;return P(c)||(b[da.FriendlyName]=c.name,b[da.Index]=c.position,b[da.Length]=c.length,b[da.Offset]=c.startTime),b}},{key:"_extractChapterMetadata",value:function(a){var b={},c=a.chapterMetadata;return la(c)&&Object.keys(c).forEach(function(a){b[a]=c[a]}),b}},{key:"_extractQoeData",value:function(a){var b={},c=a.qoeInfo;return la(c)&&(b[fa.Bitrate]=parseInt(c.bitrate,10),b[fa.Fps]=parseInt(c.fps,10),b[fa.DroppedFrames]=parseInt(c.droppedFrames,10),b[fa.StartupTime]=parseInt(c.startupTime,10)),b}},{key:"_playbackStateToMediaCollectionEvent",value:function(a){switch(a){case ib.Buffer:return X.BufferStart;case ib.Seek:return X.PauseStart;case ib.Play:return X.Play;case ib.Pause:return X.PauseStart;case ib.Stall:return X.Play;case ib.Init:return X.Ping;default:return""}}}]),a}(),ob=new Map;ob.set(K.Show,Y.Show),ob.set(K.Season,Y.Season),ob.set(K.Episode,Y.Episode),ob.set(K.AssetId,Y.AssetId),ob.set(K.Genre,Y.Genre),ob.set(K.FirstAirDate,Y.FirstAirDate),ob.set(K.FirstDigitalDate,Y.FirstDigitalDate),ob.set(K.Rating,Y.Rating),ob.set(K.Originator,Y.Originator),ob.set(K.Network,Y.Network),ob.set(K.ShowType,Y.ShowType),ob.set(K.AdLoad,Y.AdLoad),ob.set(K.MVPD,Y.MVPD),ob.set(K.Authorized,Y.Auth),ob.set(K.DayPart,Y.DayPart),ob.set(K.Feed,Y.Feed),ob.set(K.StreamFormat,Y.StreamFormat),ob.set(L.Artist,Y.Artist),ob.set(L.Album,Y.Album),ob.set(L.Label,Y.Label),ob.set(L.Author,Y.Author),ob.set(L.Station,Y.Station),ob.set(L.Publisher,Y.Publisher),nb._standardMediaMetadataMap=ob;var pb=new Map;pb.set(M.Advertiser,Z.Advertiser),pb.set(M.CampaignId,Z.CampaignId),pb.set(M.CreativeId,Z.CreativeId),pb.set(M.PlacementId,Z.PlacementId),pb.set(M.SiteId,Z.SiteId),pb.set(M.CreativeUrl,Z.CreativeUrl),nb._standardAdMetadataMap=pb;var qb={ErrNotInMedia:"Media tracker is not in active tracking session, call 'API:trackSessionStart' to begin a new tracking session.",ErrInMedia:"Media tracker is in active tracking session, call 'API:trackSessionEnd' or 'API:trackComplete' to end current tracking session.",ErrInBuffer:"Media tracker is tracking buffer events, call 'API:trackEvent(BufferComplete)' first to stop tracking buffer events.",ErrNotInBuffer:"Media tracker is not tracking buffer events, call 'API:trackEvent(BufferStart)' before 'API:trackEvent(BufferComplete)'.",ErrInSeek:"Media tracker is tracking seek events, call 'API:trackEvent(SeekComplete)' first to stop tracking seek events.",ErrNotInSeek:"Media tracker is not tracking seek events, call 'API:trackEvent(SeekStart)' before 'API:trackEvent(SeekComplete)'.",ErrNotInAdBreak:"Media tracker is not tracking any AdBreak, call 'API:trackEvent(AdBreakStart)' to begin tracking AdBreak",ErrNotInAd:"Media tracker is not tracking any Ad, call 'API:trackEvent(AdStart)' to begin tracking Ad",ErrNotInChapter:"Media tracker is not tracking any Chapter, call 'API:trackEvent(ChapterStart)' to begin tracking Chapter",ErrInvalidMediaInfo:"MediaInfo passed into 'API:trackSessionStart' is invalid.",ErrInvalidAdBreakInfo:"AdBreakInfo passed into 'API:trackEvent(AdBreakStart)' is invalid.",ErrDuplicateAdBreakInfo:"Media tracker is currently tracking the AdBreak passed into 'API:trackEvent(AdBreakStart)'.",ErrInvalidAdInfo:"AdInfo passed into 'API:trackEvent(AdStart)' is invalid.",ErrInvalidStateInfo:"StateInfo passed into 'API:trackEvent(StateStart|StateEnd)' is invalid.",ErrInvalidErrorInfo:"ErrorId passed into 'API:trackError()' is invalid.",ErrDuplicateAdInfo:"Media tracker is currently tracking the Ad passed into 'API:trackEvent(AdStart)'.",ErrInvalidChapterInfo:"ChapterInfo passed into 'API:trackEvent(ChapterStart)' is invalid.",ErrDuplicateChapterInfo:"Media tracker is currently tracking the Chapter passed into 'API:trackEvent(ChapterStart)'.",ErrInvalidQoEInfo:"QoEInfo passed into 'API:updateQoEInfo' is invalid.",ErrInvalidPlayhead:"Playhead value not present in 'API:updatePlayhead' event data.",ErrInvalidPlayerState:"Media tracker is tracking an AdBreak but not tracking any Ad and will drop any calls to track player state (Play, Pause, Buffer or Seek) in this state.",ErrInTrackedState:"Media tracker is already tracking a state with the same state name.",ErrNotInTrackedState:"Media tracker is not already tracking a state with the same state name.",ErrTrackedStatesLimitReached:"Media tracker has reached maximum number of states per session (10)."},rb=new RegExp("^[a-zA-Z0-9_\\.]+$"),sb=18e5,tb=864e5,ub=1e3,vb=10,wb=function(){function a(b,c,d){if(e(this,a),!b)throw new Error("hitProcessor should be valid");if(!c)throw new Error("logger should be valid");this._hitProcessor=b,this._logger=c,this._config=la(d)?d:{},this._resetStates(),this._setupRules()}return g(a,[{key:"track",value:function(a){var b=a[cb.Name];return T(b)?ka(a[cb.TimeStamp])?(la(a[cb.Params])||(a[cb.Params]={}),a[cb.Metadata]=this._cleanMetadata(a[cb.Metadata]),!!this._prerollDeferRule(b,a)||this._processRule(b,a)):(this._logger.log("#track - Event timestamp is missing in track event data. - "+b),!1):(this._logger.log("#track - Event name is missing in track event data"),!1)}},{key:"_resetStates",value:function(){this._media=null,this._hitGenerator=null,this._sessionRefTs=null,this._inPrerollInterval=!1,this._prerollRefTs=null,this._prerollQueuedRules=[],this._contentStarted=!1,this._contentStartRefTs=null,this._mediaIdle=!1,this._trackerIdle=!1,this._mediaIdleStartTs=0}},{key:"_createHitGenerator",value:function(a){return new nb(this._logger,this._hitProcessor,this._config,this._media,a)}},{key:"_processRule",value:function(a,b){return this._ruleEngine.processRule(a,b).success}},{key:"_setupRules",value:function(){this._ruleEngine=new hb(this._logger),this._ruleEngine.setEnterAction(this._cmdEnterAction.bind(this)),this._ruleEngine.setExitAction(this._cmdExitAction.bind(this));var a=this._isInMedia.bind(this),b=this._isInAdBreak.bind(this),c=this._isInAd.bind(this),d=this._isInChapter.bind(this),e=this._isInTrackedState.bind(this),f=this._isValidMediaInfo.bind(this),g=this._isValidAdBreakInfo.bind(this),h=this._isValidAdInfo.bind(this),i=this._isValidChapterInfo.bind(this),j=this._isValidQoEInfo.bind(this),k=this._isValidStateInfo.bind(this),l=this._isValidErrorInfo.bind(this),m=this._isDifferentAdBreakInfo.bind(this),n=this._isDifferentAdInfo.bind(this),o=this._isDifferentChapterInfo.bind(this),p=this._allowPlayerStateChange.bind(this),q=this._allowStateTrack.bind(this),r=this._isInBuffering.bind(this),s=this._isInSeeking.bind(this),t=this._cmdMediaStart.bind(this),u=this._cmdMediaSkip.bind(this),v=this._cmdMediaComplete.bind(this),w=this._cmdError.bind(this),x=this._cmdPlay.bind(this),y=this._cmdPause.bind(this),z=this._cmdBufferStart.bind(this),A=this._cmdBufferComplete.bind(this),B=this._cmdSeekStart.bind(this),C=this._cmdSeekComplete.bind(this),D=this._cmdAdStart.bind(this),E=this._cmdAdComplete.bind(this),F=this._cmdAdSkip.bind(this),G=this._cmdAdBreakStart.bind(this),H=this._cmdAdBreakComplete.bind(this),I=this._cmdAdBreakSkip.bind(this),J=this._cmdChapterStart.bind(this),K=this._cmdChapterComplete.bind(this),L=this._cmdChapterSkip.bind(this),M=this._cmdStateStart.bind(this),N=this._cmdStateEnd.bind(this),O=this._cmdBitrateChange.bind(this),P=this._cmdQoEUpdate.bind(this),Q=this._cmdPlayheadUpdate.bind(this),R=new eb(db.SessionStart,"API:trackSessionStart");R.addPredicate(a,!1,qb.ErrInMedia).addPredicate(f,!0,qb.ErrInvalidMediaInfo).addAction(t),this._ruleEngine.addRule(R);var S=new eb(db.SessionComplete,"API:trackComplete");S.addPredicate(a,!0,qb.ErrNotInMedia).addAction(F).addAction(I).addAction(L).addAction(v),this._ruleEngine.addRule(S);var T=new eb(db.SessionEnd,"API:trackSessionEnd");T.addPredicate(a,!0,qb.ErrNotInMedia).addAction(F).addAction(I).addAction(L).addAction(u),this._ruleEngine.addRule(T);var U=new eb(db.Error,"API:trackError");U.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(l,!0,qb.ErrInvalidErrorInfo).addAction(w),this._ruleEngine.addRule(U);var V=new eb(db.Play,"API:trackPlay");V.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(p,!0,qb.ErrInvalidPlayerState).addAction(C).addAction(A).addAction(x),this._ruleEngine.addRule(V);var W=new eb(db.Pause,"API:trackPause");W.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(p,!0,qb.ErrInvalidPlayerState).addPredicate(r,!1,qb.ErrInBuffer).addPredicate(s,!1,qb.ErrInSeek).addAction(y),this._ruleEngine.addRule(W);var X=new eb(db.BufferStart,"API:trackEvent(BufferStart)");X.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(p,!0,qb.ErrInvalidPlayerState).addPredicate(r,!1,qb.ErrInBuffer).addPredicate(s,!1,qb.ErrInSeek).addAction(z),this._ruleEngine.addRule(X);var Y=new eb(db.BufferComplete,"API:trackEvent(BufferComplete)");Y.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(p,!0,qb.ErrInvalidPlayerState).addPredicate(r,!0,qb.ErrNotInBuffer).addAction(A),this._ruleEngine.addRule(Y);var Z=new eb(db.SeekStart,"API:trackEvent(SeekStart)");Z.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(p,!0,qb.ErrInvalidPlayerState).addPredicate(s,!1,qb.ErrInSeek).addPredicate(r,!1,qb.ErrInBuffer).addAction(B),this._ruleEngine.addRule(Z);var $=new eb(db.SeekComplete,"API:trackEvent(SeekComplete)");$.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(p,!0,qb.ErrInvalidPlayerState).addPredicate(s,!0,qb.ErrNotInSeek).addAction(C),this._ruleEngine.addRule($);var _=new eb(db.AdBreakStart,"API:trackEvent(AdBreakStart)");_.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(g,!0,qb.ErrInvalidAdBreakInfo).addPredicate(m,!0,qb.ErrDuplicateAdBreakInfo).addAction(F).addAction(I).addAction(G),this._ruleEngine.addRule(_);var aa=new eb(db.AdBreakComplete,"API:trackEvent(AdBreakComplete)");aa.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(b,!0,qb.ErrNotInAdBreak).addAction(F).addAction(H),this._ruleEngine.addRule(aa);var ba=new eb(db.AdStart,"API:trackEvent(AdStart)");ba.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(b,!0,qb.ErrNotInAdBreak).addPredicate(h,!0,qb.ErrInvalidAdInfo).addPredicate(n,!0,qb.ErrDuplicateAdInfo).addAction(F).addAction(D),this._ruleEngine.addRule(ba);var ca=new eb(db.AdComplete,"API:trackEvent(AdComplete)");ca.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(b,!0,qb.ErrNotInAdBreak).addPredicate(c,!0,qb.ErrNotInAd).addAction(E),this._ruleEngine.addRule(ca);var da=new eb(db.AdSkip,"API:trackEvent(AdSkip)");da.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(b,!0,qb.ErrNotInAdBreak).addPredicate(c,!0,qb.ErrNotInAd).addAction(F),this._ruleEngine.addRule(da);var ea=new eb(db.ChapterStart,"API::trackEvent(chapterStart)");ea.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(i,!0,qb.ErrInvalidChapterInfo).addPredicate(o,!0,qb.ErrDuplicateChapterInfo).addAction(L).addAction(J),this._ruleEngine.addRule(ea);var fa=new eb(db.ChapterComplete,"API::trackEvent(chapterComplete)");fa.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(d,!0,qb.ErrNotInChapter).addAction(K),this._ruleEngine.addRule(fa);var ga=new eb(db.ChapterSkip,"API:trackEvent(chapterSkip)");ga.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(d,!0,qb.ErrNotInChapter).addAction(L),this._ruleEngine.addRule(ga);var ha=new eb(db.BitrateChange,"API:trackEvent(BitrateChange)");ha.addPredicate(a,!0,qb.ErrNotInMedia).addAction(O),
this._ruleEngine.addRule(ha);var ia=new eb(db.QoEUpdate,"API:trackEvent(QoEUpdate)");ia.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(j,!0,qb.ErrInvalidQoEInfo).addAction(P),this._ruleEngine.addRule(ia);var ja=new eb(db.PlayheadUpdate,"API:trackEvent(PlayheadUpdate)");ja.addPredicate(a,!0,qb.ErrNotInMedia).addAction(Q),this._ruleEngine.addRule(ja);var ka=new eb(db.StateStart,"API:trackEvent(StateStart)");ka.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(k,!0,qb.ErrInvalidStateInfo).addPredicate(e,!1,qb.ErrInTrackedState).addPredicate(q,!0,qb.ErrTrackedStatesLimitReached).addAction(M),this._ruleEngine.addRule(ka);var la=new eb(db.StateEnd,"API:trackEvent(StateEnd)");la.addPredicate(a,!0,qb.ErrNotInMedia).addPredicate(k,!0,qb.ErrInvalidStateInfo).addPredicate(e,!0,qb.ErrNotInTrackedState).addAction(N),this._ruleEngine.addRule(la)}},{key:"_isInMedia",value:function(){return!P(this._media)}},{key:"_isInAdBreak",value:function(){return this._media.isInAdBreak}},{key:"_isInAd",value:function(){return this._media.isInAd}},{key:"_isInChapter",value:function(){return this._media.isInChapter}},{key:"_isInBuffering",value:function(){return this._media.isInPlaybackState(ib.Buffer)}},{key:"_isInSeeking",value:function(){return this._media.isInPlaybackState(ib.Seek)}},{key:"_isInTrackedState",value:function(a){var b=Na.deserialize(a[cb.Params]);return this._media.isCustomStateActive(b)}},{key:"_isValidMediaInfo",value:function(a){return null!=Wa.deserialize(a[cb.Params])}},{key:"_isValidAdBreakInfo",value:function(a){return null!=Fa.deserialize(a[cb.Params])}},{key:"_isValidAdInfo",value:function(a){return null!=Ba.deserialize(a[cb.Params])}},{key:"_isValidStateInfo",value:function(a){return null!=Na.deserialize(a[cb.Params])}},{key:"_isValidChapterInfo",value:function(a){return null!=Ka.deserialize(a[cb.Params])}},{key:"_isValidQoEInfo",value:function(a){return null!=_a.deserialize(a[cb.Params])}},{key:"_isValidErrorInfo",value:function(a){var b=a[cb.Params];if(!la(b))return!1;var c=b[cb.ErrorId];return T(c)}},{key:"_isDifferentAdBreakInfo",value:function(a){return!Fa.deserialize(a[cb.Params]).equal(this._media.adBreakInfo)}},{key:"_isDifferentAdInfo",value:function(a){return!Ba.deserialize(a[cb.Params]).equal(this._media.adInfo)}},{key:"_isDifferentChapterInfo",value:function(a){return!Ka.deserialize(a[cb.Params]).equal(this._media.chapterInfo)}},{key:"_allowPlayerStateChange",value:function(){return!this._media.isInAdBreak||this._media.isInAd}},{key:"_allowStateTrack",value:function(a){var b=Na.deserialize(a[cb.Params]);return this._media.hasTrackedCustomState(b)||this._media.numTrackedCustomStates()<vb}},{key:"_cmdEnterAction",value:function(a,b){var c=this._getRefTs(b);return P(this._hitGenerator)||this._hitGenerator.setRefTS(c),!0}},{key:"_cmdExitAction",value:function(a,b){if(P(this._media))return!1;a.id===db.AdStart&&(!this._media.isInPlaybackState(ib.Init)||this._media.isInPlaybackState(ib.Buffer)||this._media.isInPlaybackState(ib.Seek)||this._media.enterPlaybackState(ib.Play)),a.id!==db.BufferComplete&&a.id!==db.SeekComplete||this._media.isInPlaybackState(ib.Init)&&this._media.enterPlaybackState(ib.Pause),this._cmdIdleDetection(b),this._cmdSessionTimeoutDetection(b),this._cmdContentStartDetection(b);var c=a.id===db.AdStart||a.id===db.AdBreakComplete;return this._hitGenerator.processPlayback(c),!0}},{key:"_cmdMediaStart",value:function(a){var b=Wa.deserialize(a[cb.Params]),c=a[cb.Metadata],d=this._getRefTs(a);return this._media=new jb(b,c),this._hitGenerator=this._createHitGenerator(d),this._hitGenerator.processMediaStart(),this._sessionRefTs=d,this._inPrerollInterval=0!==b.prerollWaitTime,this._prerollRefTs=d,!0}},{key:"_cmdMediaComplete",value:function(){return this._hitGenerator.processMediaComplete(),this._resetStates(),!0}},{key:"_cmdMediaSkip",value:function(){return this._hitGenerator.processMediaSkip(),this._resetStates(),!0}},{key:"_cmdAdBreakStart",value:function(a){var b=Fa.deserialize(a[cb.Params]);return this._media.setAdBreakInfo(b),this._hitGenerator.processAdBreakStart(),!0}},{key:"_cmdAdBreakComplete",value:function(){return this._hitGenerator.processAdBreakComplete(),this._media.clearAdBreakInfo(),!0}},{key:"_cmdAdBreakSkip",value:function(){return this._media.isInAdBreak&&(this._hitGenerator.processAdBreakSkip(),this._media.clearAdBreakInfo()),!0}},{key:"_cmdAdStart",value:function(a){var b=Ba.deserialize(a[cb.Params]),c=a[cb.Metadata];return this._media.setAdInfo(b,c),this._hitGenerator.processAdStart(),!0}},{key:"_cmdAdComplete",value:function(){return this._hitGenerator.processAdComplete(),this._media.clearAdInfo(),!0}},{key:"_cmdAdSkip",value:function(){return this._media.isInAd&&(this._hitGenerator.processAdSkip(),this._media.clearAdInfo()),!0}},{key:"_cmdChapterStart",value:function(a){var b=Ka.deserialize(a[cb.Params]),c=a[cb.Metadata];return this._media.setChapterInfo(b,c),this._hitGenerator.processChapterStart(),!0}},{key:"_cmdChapterComplete",value:function(){return this._hitGenerator.processChapterComplete(),this._media.clearChapterInfo(),!0}},{key:"_cmdChapterSkip",value:function(){return this._media.isInChapter&&(this._hitGenerator.processChapterSkip(),this._media.clearChapterInfo()),!0}},{key:"_cmdError",value:function(a){var b=a[cb.Params],c=b[cb.ErrorId];return this._hitGenerator.processError(c),!0}},{key:"_cmdBitrateChange",value:function(){return this._hitGenerator.processBitrateChange(),!0}},{key:"_cmdPlay",value:function(){return this._media.enterPlaybackState(ib.Play),!0}},{key:"_cmdPause",value:function(){return this._media.enterPlaybackState(ib.Pause),!0}},{key:"_cmdBufferStart",value:function(){return this._media.enterPlaybackState(ib.Buffer),!0}},{key:"_cmdBufferComplete",value:function(){return this._media.isInPlaybackState(ib.Buffer)&&this._media.exitPlaybackState(ib.Buffer),!0}},{key:"_cmdSeekStart",value:function(){return this._media.enterPlaybackState(ib.Seek),!0}},{key:"_cmdSeekComplete",value:function(){return this._media.isInPlaybackState(ib.Seek)&&this._media.exitPlaybackState(ib.Seek),!0}},{key:"_cmdQoEUpdate",value:function(a){var b=_a.deserialize(a[cb.Params]);return this._media.qoeInfo=b,!0}},{key:"_cmdPlayheadUpdate",value:function(a){var b=a[cb.Params];if(la(b)){var c=b[cb.Playhead];ja(c)&&c>=0&&(this._media.playhead=c)}return!0}},{key:"_cmdIdleDetection",value:function(a){var b=this._getRefTs(a);this._media.isIdle()?this._mediaIdle?!this._trackerIdle&&b-this._mediaIdleStartTs>=sb&&(this._hitGenerator.processSessionAbort(),this._trackerIdle=!0):(this._mediaIdle=!0,this._mediaIdleStartTs=b):(this._trackerIdle&&(this._hitGenerator.processSessionRestart(),this._trackerIdle=!1,this._sessionRefTs=b,this._contentStarted=!1,this._contentStartRefTs=null),this._mediaIdle=!1)}},{key:"_cmdSessionTimeoutDetection",value:function(a){var b=this._getRefTs(a);!this._trackerIdle&&b-this._sessionRefTs>=tb&&(this._hitGenerator.processSessionAbort(),this._hitGenerator.processSessionRestart(),this._sessionRefTs=b,this._contentStarted=!1,this._contentStartRefTs=null)}},{key:"_cmdContentStartDetection",value:function(a){return!(!this._media.isIdle()&&!this._contentStarted)||(this._media.isInAdBreak?(this._contentStartRefTs=null,!0):(null==this._contentStartRefTs&&(this._contentStartRefTs=this._getRefTs(a)),this._getRefTs(a)-this._contentStartRefTs>=ub&&(this._hitGenerator.processPlayback(!0),this._contentStarted=!0),!0))}},{key:"_cmdStateStart",value:function(a){var b=Na.deserialize(a[cb.Params]);return this._media.startCustomState(b),this._hitGenerator.processCustomStateStart(b),!0}},{key:"_cmdStateEnd",value:function(a){var b=Na.deserialize(a[cb.Params]);return this._media.endCustomState(b),this._hitGenerator.processCustomStateEnd(b),!0}},{key:"_getRefTs",value:function(a){var b=a[cb.TimeStamp];return ka(b)?b:null}},{key:"_prerollDeferRule",value:function(a,b){if(this._inPrerollInterval&&null!=this._media){var c=this._media.mediaInfo.prerollWaitTime;this._prerollQueuedRules.push({eventName:a,context:b});if(this._getRefTs(b)-this._prerollRefTs>=c||a===db.AdBreakStart||a===db.MediaComplete||a===db.MediaSkip){for(var d=this._prerollReorderRules(this._prerollQueuedRules),e=0;e<d.length;e++){var f=d[e];this._processRule(f.eventName,f.context)}this._prerollQueuedRules=[],this._inPrerollInterval=!1}return!0}return!1}},{key:"_prerollReorderRules",value:function(a){for(var b=[],c=!1,d=0;d<a.length;++d)if(a[d].eventName===db.AdBreakStart){c=!0;break}for(var e=c,f=0;f<a.length;f++){var g=a[f];g.eventName===db.Play&&e||(g.eventName===db.AdBreakStart&&(e=!1),b.push(g))}return b}},{key:"_cleanMetadata",value:function(a){var b=this,c={};return la(a)&&Object.keys(a).forEach(function(d){var e=a[d];rb.test(d)&&!P(e)?c[d]=String(e):b._logger.log("#_cleanMetadata - Dropping metadata item "+d+": "+e)}),c}}]),a}(),xb=500,yb=750,zb=function(){function a(b,c,d){e(this,a),this._logger=r("MediaTracker ("+c+")"),this._tracker=new wb(b,this._logger,d),this._timer=null,this._lastEventTS=null,this._lastPlayheadParams=null}return g(a,[{key:"trackSessionStart",value:function(a,b){this._logger.log("trackSessionStart(info:"+bb(a)+" metadata:"+bb(b)+")"),this._trackInternal(db.SessionStart,a,b)}},{key:"trackSessionEnd",value:function(){this._logger.log("trackSessionEnd"),this._trackInternal(db.SessionEnd)}},{key:"trackComplete",value:function(){this._logger.log("trackComplete"),this._trackInternal(db.SessionComplete)}},{key:"trackPlay",value:function(){this._logger.log("trackPlay"),this._trackInternal(db.Play)}},{key:"trackPause",value:function(){this._logger.log("trackPause"),this._trackInternal(db.Pause)}},{key:"trackEvent",value:function(a,b,c){this._logger.log("trackEvent("+a+" info:"+bb(b)+" metadata:"+bb(c)+")"),this._trackInternal(a,b,c)}},{key:"trackError",value:function(a){this._logger.log("trackError("+a+")");var b=h({},cb.ErrorId,a);this._trackInternal(db.Error,b)}},{key:"updatePlayhead",value:function(a){var b=h({},cb.Playhead,a);this._trackInternal(db.PlayheadUpdate,b)}},{key:"updateQoEObject",value:function(a){this._logger.log("updateQoEObject("+bb(a)+")"),this._trackInternal(db.QoEUpdate,a)}},{key:"destroy",value:function(){this._logger.log("destroy()"),this._stopTimer(),this._tracker=null}},{key:"_trackInternal",value:function(a,c,d){var e,f=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this._tracker)return void this._logger.warn("Dropping the call as the tracker instance is already destroyed");var g=b.getTimeMilliseconds(),i=(e={},h(e,cb.Name,a),h(e,cb.Params,c),h(e,cb.Metadata,d),h(e,cb.TimeStamp,g),h(e,cb.InternalEvent,f),e),j=this._tracker.track(i);this._lastEventTS=g,a===db.PlayheadUpdate&&(this._lastPlayheadParams=c),a===db.SessionStart&&j?this._startTimer():a!==db.SessionComplete&&a!==db.SessionEnd||this._stopTimer()}},{key:"_startTimer",value:function(){var a=this;this._timer||(this._timer=b.createTimer(function(){a._onTick()},xb))}},{key:"_stopTimer",value:function(){this._timer&&(b.destroyTimer(this._timer),this._timer=null)}},{key:"_onTick",value:function(){b.getTimeMilliseconds()-this._lastEventTS>yb&&this._trackInternal(db.PlayheadUpdate,this._lastPlayheadParams,null,!0)}}]),a}(),Ab=new wa,Bb=k(),Cb={configure:D,getInstance:E,createMediaObject:x,createAdBreakObject:y,createAdObject:z,createChapterObject:A,createQoEObject:B,createStateObject:C,version:c,Event:G,MediaType:I,PlayerState:J,StreamType:N,MediaObjectKey:H,VideoMetadataKeys:K,AudioMetadataKeys:L,AdMetadataKeys:M};return j({},Cb,{configure:F})};!function(a,b,c,d,f,g){function h(){}var i=l.LogType,j=l.HttpMethod,k=d.instanceWithTag("Media"),m={getTimeMilliseconds:ADBMobile_platform.getTimeSince1970Millis,createTimer:ADBMobile_platform.setInterval,destroyTimer:ADBMobile_platform.clearInterval,logMessage:function(a,b){switch(a){case i.Log:case i.Info:k.debug(b);break;case i.Warn:k.warning(b);break;case i.Error:k.error(b)}},sendRequest:function(a,b,c,d,e){var g=b===j.Get?"GET":"POST";ADBMobile_platform.httpRequestAsync(a,g,c,d,5e3,function(a,b,c,d){e(a,f.parseHTTPHeaders(d),b)})}},n=l.PrivacyStatus,o=l.ECResolverKeys;h.prototype.init=function(){this._setupResolver(),this._privacyStatus=n.OptIn,this._privacyCallback=null,this._clearIds(),this._fetchIds()},h.prototype._clearIds=function(){k.debug("[ADBResolver] Clear Ids"),this._haveIds=!1,this._mid=null,this._aid=null},h.prototype._fetchIds=function(){k.debug("[ADBResolver] Fetching Ids");var a=!1,c=!1,d=this;g.getMarketingCloudIDAsync(function(b){k.debug("[ADBResolver] Mid : "+b),a=!0,d._mid=b,d._haveIds=c&a}),b.getAIDAsync(function(b){k.debug("[ADBResolver] Aid : "+b),c=!0,d._aid=b,d._haveIds=c&a})},h.prototype.resolveKeys=function(a){var b={};if(!a||0===a.length)return b;for(var c=0;c<a.length;c++){var d=a[c],e=Object.prototype.hasOwnProperty.call(this._fnMap,d)?this._fnMap[d].call(this):null;null!=e&&(b[d]=e)}return b},h.prototype.isReady=function(){return this._privacyStatus===n.OptIn&&this._haveIds},h.prototype.getPrivacyStatus=function(){return this._privacyStatus},h.prototype.notifyPrivacyChange=function(a){this._privacyCallback=a},h.prototype.onPrivacyChange=function(){var a=n.OptIn;c.getPrivacyStatus()===c.PRIVACY_STATUS_OPT_OUT&&(a=n.OptOut),this._privacyStatus!==a&&(k.debug("[ADBResolver] Privacy changed to "+a),this._privacyStatus=a,this._privacyCallback&&this._privacyCallback(a),a===n.OptIn?this._fetchIds():this._clearIds())},h.prototype._setupResolver=function(){var a={};a[o.Rsid]=function(){return c.reportSuiteIDs()},a[o.AnalyticsTrackingServer]=function(){return c.trackingServer()},a[o.AnalyticsSsl]=function(){return c.ssl()},a[o.Vid]=function(){return e.getUserIdentifier()},a[o.Aid]=function(){return this._aid},a[o.Mcid]=function(){return this._mid},a[o.McOrgId]=function(){return c.marketingCloudOrganizationIdentifier()},a[o.AamLocHint]=function(){var a=g.getAnalyticsParameters();if(a)return a.aamlh},a[o.CustomerIds]=function(){},a[o.MediaTrackingServer]=function(){return c.mTrackingServer()},a[o.MediaChannel]=function(){return c.mChannel()},a[o.MediaAppVersion]=function(){return c.mSDK()},a[o.MediaPlayerName]=function(){return c.mPlayerName()},a[o.MediaSsl]=function(){return c.mSSL()},this._fnMap=a},a._PlatformShim=m,a._ADBResolver=new h}(k,a,e,g,h,j),function(a,b,c,d){function f(){e.mediaHeartbeatEnabled()&&(j.init(),k.configure())}function g(){j.onPrivacyChange()}function h(a){this._tracker=a,this._delegate=null,this._timer=null}var i=a._PlatformShim,j=a._ADBResolver,k=m(j,i,d.codeVersion),l="media.standardmetadata",n="ad.standardmetadata";h.prototype._onTick=function(){if(this._delegate){this._tracker.updatePlayhead(this._delegate.getCurrentPlaybackTime());var a=this._delegate.getQoSObject();this._lastQoSObject!=a&&(this._tracker.updateQoEObject(a),this._lastQoSObject=a)}},h.prototype._startTimer=function(){if(!this.timer){this._lastQoSObject=null;var a=this;this._timer=ADBMobile_platform.setInterval(function(){a._onTick()},500)}},h.prototype._stopTimer=function(){this._timer&&(ADBMobile_platform.clearInterval(this._timer),this._timer=null)},h.prototype.setDelegate=function(a){a&&"function"==typeof a.getCurrentPlaybackTime&&"function"==typeof a.getQoSObject&&(this._delegate=a)},h.prototype.trackSessionStart=function(a,b){var d=null;c.isObject(a)&&c.isObject(a[l])&&(d=a[l],delete a[l]);var e={};c.append(e,b),c.append(e,d),this._tracker.trackSessionStart(a,e),this._startTimer()},h.prototype.trackSessionEnd=function(){this._stopTimer(),this._tracker.trackSessionEnd()},h.prototype.trackComplete=function(){this._stopTimer(),this._tracker.trackComplete()},h.prototype.trackPlay=function(){this._tracker.trackPlay()},h.prototype.trackPause=function(){this._tracker.trackPause()},h.prototype.trackEvent=function(a,b,d){var e=null;if(a===k.Event.AdStart){var f=null;c.isObject(b)&&c.isObject(b[n])&&(f=b[n],delete b[n]),e={},c.append(e,d),c.append(e,f)}else e=d;this._tracker.trackEvent(a,b,e)},h.prototype.trackError=function(a){this._tracker.trackError(a)};var o=new h(k.getInstance());a.init=f,a.onPrivacyChange=g,a.setDelegate=o.setDelegate.bind(o),a.trackSessionStart=o.trackSessionStart.bind(o),a.trackSessionEnd=o.trackSessionEnd.bind(o),a.trackPlay=o.trackPlay.bind(o),a.trackPause=o.trackPause.bind(o),a.trackComplete=o.trackComplete.bind(o),a.trackEvent=o.trackEvent.bind(o),a.trackError=o.trackError.bind(o),a.createMediaObject=k.createMediaObject,a.createAdBreakObject=k.createAdBreakObject,a.createChapterObject=k.createChapterObject,a.createAdObject=k.createAdObject,a.createQoSObject=k.createQoEObject,a.createStateObject=k.createStateObject,a.MediaType=k.MediaType,a.Event=k.Event,a.PlayerState=k.PlayerState,a.StreamType={VOD:k.StreamType.VOD,LIVE:k.StreamType.Live,LINEAR:k.StreamType.Linear,PODCAST:k.StreamType.Podcast,AUDIOBOOK:k.StreamType.Audiobook,AOD:k.StreamType.AOD},a.MediaObjectKey={StandardMediaMetadata:l,StandardAdMetadata:n,PrerollTrackingWaitingTime:"media.prerollwaittime",GranularAdTracking:k.MediaObjectKey.GranularAdTracking,MediaResumed:k.MediaObjectKey.MediaResumed},a.VideoMetadataKeys={SHOW:k.VideoMetadataKeys.Show,SEASON:k.VideoMetadataKeys.Season,EPISODE:k.VideoMetadataKeys.Episode,ASSET_ID:k.VideoMetadataKeys.AssetId,GENRE:k.VideoMetadataKeys.Genre,FIRST_AIR_DATE:k.VideoMetadataKeys.FirstAirDate,FIRST_DIGITAL_DATE:k.VideoMetadataKeys.FirstDigitalDate,RATING:k.VideoMetadataKeys.Rating,ORIGINATOR:k.VideoMetadataKeys.Originator,NETWORK:k.VideoMetadataKeys.Network,SHOW_TYPE:k.VideoMetadataKeys.ShowType,AD_LOAD:k.VideoMetadataKeys.AdLoad,MVPD:k.VideoMetadataKeys.MVPD,AUTHORIZED:k.VideoMetadataKeys.Authorized,DAY_PART:k.VideoMetadataKeys.DayPart,FEED:k.VideoMetadataKeys.Feed,STREAM_FORMAT:k.VideoMetadataKeys.StreamFormat},a.AudioMetadataKeys={ARTIST:k.AudioMetadataKeys.Artist,ALBUM:k.AudioMetadataKeys.Album,LABEL:k.AudioMetadataKeys.Label,AUTHOR:k.AudioMetadataKeys.Author,STATION:k.AudioMetadataKeys.Station,PUBLISHER:k.AudioMetadataKeys.Publisher},a.AdMetadataKeys={ADVERTISER:k.AdMetadataKeys.Advertiser,CAMPAIGN_ID:k.AdMetadataKeys.CampaignId,CREATIVE_ID:k.AdMetadataKeys.CreativeId,PLACEMENT_ID:k.AdMetadataKeys.PlacementId,SITE_ID:k.AdMetadataKeys.SiteId,CREATIVE_URL:k.AdMetadataKeys.CreativeUrl}}(k,0,h,i);var n=n||{};!function(a){"use strict";function b(a,b){this.key=a,this.values=b}b.prototype.matches=function(a){var b=a[this.key];if("string"!=typeof b&&"number"!=typeof b)return!1;if(b=b.toString(),this.values)for(var c=0;c<this.values.length;++c)if(-1!==b.indexOf(this.values[c]))return!0;return!1},a.MatcherContains=b}(n);var n=n||{};!function(a){"use strict";function b(a,b){var c=a.length-b.length,d=a.lastIndexOf(b,c);return-1!==d&&d===c}function c(a,b){this.key=a,this.values=b}c.prototype.matches=function(a){var c=a[this.key];if("string"!=typeof c&&"number"!=typeof c)return!1;if(c=c.toString(),this.values)for(var d=0;d<this.values.length;++d)if(b(c,this.values[d].toString()))return!0;return!1},a.MatcherEndsWith=c}(n);var n=n||{};!function(a){"use strict";function b(a,b){this.key=a,this.values=b}b.prototype.matches=function(a){var b=a[this.key];if("string"!=typeof b&&"number"!=typeof b)return!1;if(b=b.toString(),this.values)for(var c=0;c<this.values.length;++c)if(b===this.values[c].toString())return!0;return!1},a.MatcherEquals=b}(n);var n=n||{};!function(a){"use strict";function b(a,b){this.key=a,this.values=b}b.prototype.matches=function(a){return void 0!==a[this.key]},a.MatcherExists=b}(n);var n=n||{};!function(a){"use strict";function b(a,b){this.key=a,this.values=b}b.prototype.matches=function(a){var b=a[this.key];if("string"!=typeof b&&"number"!=typeof b)return!1;if(isNaN(Number(b)))return!1;if(this.values)for(var c=0;c<this.values.length;++c)if(Number(b)>Number(this.values[c]))return!0;return!1},a.MatcherGreaterThan=b}(n);var n=n||{};!function(a){"use strict";function b(a,b){this.key=a,this.values=b}b.prototype.matches=function(a){var b=a[this.key];if("string"!=typeof b&&"number"!=typeof b)return!1;if(isNaN(Number(b)))return!1;if(this.values)for(var c=0;c<this.values.length;++c)if(Number(b)>=Number(this.values[c]))return!0;return!1},a.MatcherGreaterThanOrEqual=b}(n);var n=n||{};!function(a){"use strict";function b(a,b){this.key=a,this.values=b}b.prototype.matches=function(a){var b=a[this.key];if("string"!=typeof b&&"number"!=typeof b)return!1;if(isNaN(Number(b)))return!1;if(this.values)for(var c=0;c<this.values.length;++c)if(Number(b)<Number(this.values[c]))return!0;return!1},a.MatcherLessThan=b}(n);var n=n||{};!function(a){"use strict";function b(a,b){this.key=a,this.values=b}b.prototype.matches=function(a){var b=a[this.key];if("string"!=typeof b&&"number"!=typeof b)return!1;if(isNaN(Number(b)))return!1;if(this.values)for(var c=0;c<this.values.length;++c)if(Number(b)<=Number(this.values[c]))return!0;return!1},a.MatcherLessThanOrEqual=b}(n);var n=n||{};!function(a){"use strict";function b(b,c){this.containsHandler=new a.MatcherContains(b,c)}b.prototype.matches=function(a){return!this.containsHandler.matches(a)},a.MatcherNotContains=b}(n);var n=n||{};!function(a){"use strict";function b(b,c){this.equalsHandler=new a.MatcherEquals(b,c)}b.prototype.matches=function(a){return!this.equalsHandler.matches(a)},a.MatcherNotEquals=b}(n);var n=n||{};!function(a){"use strict";function b(b,c){this._handler=new a.MatcherExists(b,c)}b.prototype.matches=function(a){return!this._handler.matches(a)},a.MatcherNotExists=b}(n);var n=n||{};!function(a){"use strict";function b(a,b){return 0===a.indexOf(b)}function c(a,b){this.key=a,this.values=b}c.prototype.matches=function(a){var c=a[this.key];if("string"!=typeof c&&"number"!=typeof c)return!1;if(c=c.toString(),this.values)for(var d=0;d<this.values.length;++d)if(b(c,this.values[d].toString()))return!0;return!1},a.MatcherStartsWith=c}(n);var o=function(){function a(a){return this.JSON_CONFIG_TEMPLATE="template",this.JSON_CONFIG_MESSAGE_ID="messageId",this.JSON_CONFIG_SHOW_RULE="showRule",this.JSON_CONFIG_START_DATE="startDate",this.MESSAGE_JSON_PAYLOAD="payload",this.JSON_CONFIG_END_DATE="endDate",this.JSON_CONFIG_SHOW_OFFLINE="showOffline",this.JSON_CONFIG_AUDIENCES="audiences",this.JSON_CONFIG_TRIGGERS="triggers",this.JSON_CONFIG_ASSETS="assets",this.MESSAGE_IMAGE_CACHE_DIR="messageImages",this.JSON_DEFAULT_START_DATE=0,this.JSON_DEFAULT_SHOW_OFFLINE="false",this.MESSAGE_ENUM_STRING_UNKNOWN="unknown",this.MESSAGE_SHOW_RULE_STRING_ALWAYS="always",this.MESSAGE_SHOW_RULE_STRING_ONCE="once",this.MESSAGE_SHOW_RULE_STRING_UNTIL_CLICK="untilClick",this.MESSAGE_TEMPLATE_STRING_ALERT="alert",this.MESSAGE_TEMPLATE_STRING_FULLSCREEN="fullscreen",this.MESSAGE_TEMPLATE_STRING_LOCAL_NOTIFICATION="local",this.MESSAGE_TEMPLATE_STRING_CALLBACK="callback",this.MESSAGE_TYPE_HANDLER="handler",this.MESSAGE_TYPE="type",this.COMBINED_VARS="combinedVars",this.ADB_TEMPLATE_CALLBACK_URL="templateurl",this.ADB_TEMPLATE_CALLBACK_BODY="templatebody",this.ADB_TEMPLATE_CALLBACK_TYPE="contenttype",this.ADB_TEMPLATE_CALLBACK_TIMEOUT="timeout",this.ADB_TEMPLATE_TOKEN_START="{",this.ADB_TEMPLATE_TOKEN_END="}",this.ADB_TEMPLATE_TIMEOUT_DEFAULT=2,this.message={},this.message[this.JSON_CONFIG_MESSAGE_ID]="",this.message[this.JSON_CONFIG_TEMPLATE]="",this.message[this.MESSAGE_TYPE_HANDLER]=null,this.message[this.JSON_CONFIG_START_DATE]=this.JSON_DEFAULT_START_DATE,this.message[this.JSON_CONFIG_END_DATE]=null,this.message[this.JSON_DEFAULT_SHOW_OFFLINE]=this.JSON_DEFAULT_SHOW_OFFLINE,this.message[this.JSON_CONFIG_AUDIENCES]=[],this.message[this.JSON_CONFIG_TRIGGERS]=[],this.message[this.MESSAGE_TYPE]=null,this.message[this.COMBINED_VARS]={},this.validLetters={},this.validLetters.a=1,this.validLetters.b=1,this.validLetters.c=1,this.validLetters.d=1,this.validLetters.e=1,this.validLetters.f=1,this.validLetters.g=1,this.validLetters.h=1,this.validLetters.i=1,this.validLetters.j=1,this.validLetters.k=1,this.validLetters.l=1,this.validLetters.m=1,this.validLetters.n=1,this.validLetters.o=1,this.validLetters.p=1,this.validLetters.q=1,this.validLetters.r=1,this.validLetters.s=1,this.validLetters.t=1,this.validLetters.u=1,this.validLetters.v=1,this.validLetters.w=1,this.validLetters.x=1,this.validLetters.y=1,this.validLetters.z=1,this.validLetters[0]=1,this.validLetters[1]=1,this.validLetters[2]=1,this.validLetters[3]=1,this.validLetters[4]=1,this.validLetters[5]=1,this.validLetters[6]=1,this.validLetters[7]=1,this.validLetters[8]=1,this.validLetters[9]=1,this.validLetters._=1,this.validLetters["."]=1,this.validLetters["%"]=1,b.call(this,a)?this:(g.warning("[Message] Initialization failed"),null)}function b(a){if("object"==typeof a)return a[this.JSON_CONFIG_TEMPLATE]?(this.message[this.JSON_CONFIG_TEMPLATE]=a[this.JSON_CONFIG_TEMPLATE],this.message[this.JSON_CONFIG_TEMPLATE]!=this.MESSAGE_TEMPLATE_STRING_CALLBACK?(g.warning("[Message] Unable to create instance of message with that template"),!1):(this.message[this.MESSAGE_TYPE]=this.MESSAGE_TEMPLATE_STRING_CALLBACK,c.call(this,a))):(g.warning("[Message] Template is required for postback message"),!1)}function c(a){if(a){if(!a[this.JSON_CONFIG_MESSAGE_ID]||""===a[this.JSON_CONFIG_MESSAGE_ID])return g.warning("[Message] Unable to create instance of message without message id"),!1;if(this.message[this.JSON_CONFIG_MESSAGE_ID]=a[this.JSON_CONFIG_MESSAGE_ID],!a[this.MESSAGE_JSON_PAYLOAD])return g.warning("[Message] Data Callback - Unable to create data callback. payload is empty"),!1;this.message[this.MESSAGE_JSON_PAYLOAD]=a[this.MESSAGE_JSON_PAYLOAD];if(!d.call(this))return!1;if(a[this.JSON_CONFIG_SHOW_RULE]&&""!==a[this.JSON_CONFIG_SHOW_RULE]){if(a[this.JSON_CONFIG_SHOW_RULE]==this.message[this.MESSAGE_ENUM_STRING_UNKNOWN])return g.warning("[Message] Unable to create message. showrule is invalid"),!1;if(!f.call(this,a[this.JSON_CONFIG_SHOW_RULE]))return g.warning("[Message] Unsupported message rule"),!1;this.message[this.JSON_CONFIG_SHOW_RULE]=a[this.JSON_CONFIG_SHOW_RULE]}var b;if(b=a[this.JSON_CONFIG_START_DATE]&&""!==a[this.JSON_CONFIG_START_DATE]?a[this.JSON_CONFIG_START_DATE]:this.JSON_DEFAULT_START_DATE,this.message[this.JSON_CONFIG_START_DATE]=b,!a[this.JSON_CONFIG_END_DATE]||""===a[this.JSON_CONFIG_END_DATE])return g.warning("[Message] Cannot create message. endDate is invalid."),!1;this.message[this.JSON_CONFIG_END_DATE]=a[this.JSON_CONFIG_END_DATE],a[this.JSON_CONFIG_SHOW_OFFLINE]&&""!==a[this.JSON_CONFIG_SHOW_OFFLINE]?this.message[this.JSON_CONFIG_SHOW_OFFLINE]=a[this.JSON_CONFIG_SHOW_OFFLINE]:this.message[this.JSON_CONFIG_SHOW_OFFLINE]=this.message[this.JSON_DEFAULT_SHOW_OFFLINE];var c,e;if(a[this.JSON_CONFIG_AUDIENCES]){var h=a[this.JSON_CONFIG_AUDIENCES];for(e=0;e<h.length;++e){var i=h[e];c=new p.Matcher(i),this.message[this.JSON_CONFIG_AUDIENCES].push(c)}}if(a[this.JSON_CONFIG_TRIGGERS]){var j=a[this.JSON_CONFIG_TRIGGERS];for(e=0;e<j.length;++e){var k=j[e];c=new p.Matcher(k),this.message[this.JSON_CONFIG_TRIGGERS].push(c)}return this.message[this.JSON_CONFIG_TRIGGERS].length<=0?(g.warning("[Message] Unable to load message. At least one valid trigger is required for a message."),!1):(g.debug("[Message] "+this.message[this.JSON_CONFIG_TRIGGERS].length+" triggers found"),!0)}return g.warning("[Message] Empty messages"),!1}}function d(){var a=this.message[this.MESSAGE_JSON_PAYLOAD];return a[this.ADB_TEMPLATE_CALLBACK_URL]&&""!==a[this.ADB_TEMPLATE_CALLBACK_URL]?(this.message[this.ADB_TEMPLATE_CALLBACK_URL]=a[this.ADB_TEMPLATE_CALLBACK_URL],a[this.ADB_TEMPLATE_CALLBACK_TIMEOUT]?this.message[this.ADB_TEMPLATE_CALLBACK_TIMEOUT]=a[this.ADB_TEMPLATE_CALLBACK_TIMEOUT]:(g.warning("[Message] Setting default timeout"),this.message[this.ADB_TEMPLATE_CALLBACK_TIMEOUT]=this.message[this.ADB_TEMPLATE_TIMEOUT_DEFAULT]),a[this.ADB_TEMPLATE_CALLBACK_BODY]&&""!==a[this.ADB_TEMPLATE_CALLBACK_BODY]?(this.message[this.ADB_TEMPLATE_CALLBACK_BODY]=a[this.ADB_TEMPLATE_CALLBACK_BODY],this.message[this.ADB_TEMPLATE_CALLBACK_TYPE]=a[this.ADB_TEMPLATE_CALLBACK_TYPE]):g.warning("[Message] Unable to read templatebody. This is not a required field"),!0):(g.warning("[Message] Unable to create data callback. templateurl is required"),!1)}function f(a){return a===this.MESSAGE_SHOW_RULE_STRING_ALWAYS||a===this.MESSAGE_SHOW_RULE_STRING_ONCE}function k(a){return a}function l(a){var b={};j.getMarketingCloudIDAsync(function(a){b["%mcid%"]=a}),b["%timestampz%"]=ADBMobile_platform.getDateInISOString(),b["%timestampu%"]=ADBMobile_platform.getTimeSince1970(),b["%sdkver%"]=i.codeVersion,b["%cachebust%"]=""+1e8*Math.random();var c=h.serializeParameters(a);if(c.length>2&&(c=c.substring(1)),b["%all_url%"]=c,a){var d=JSON.stringify(a);d&&(b["%all_json%"]=d)}return b}function m(a){var b=[];if(a&&""!==a){var c,d=a.length;for(c=0;c<d;c++){if(a.substring(c,c+1)===this.ADB_TEMPLATE_TOKEN_START){var e;for(e=c+1;e<d;e++){if(a.substring(e,e+1)===this.ADB_TEMPLATE_TOKEN_END)break}if(e==d)break;var f=a.substring(c,e+1);!0===r.call(this,f.substring(1,f.length-1))&&(b.push(f),c=e)}}}else g.warning("[Message] findTokensForExpansion: empty string with tokens");return b}function n(a,b){var c={},d=this.message[this.COMBINED_VARS]||{};if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.substring(1,f.length-1).toLowerCase(),h=d[g];c[f]=h?b?encodeURIComponent(h):h:""}return c}function o(a,b){var c,d=a;for(c in b)if(b.hasOwnProperty(c))for(;-1!=d.indexOf(c);){var e=d.indexOf(c),f=b[c],g=d.slice(0,e),h=d.slice(e+c.length);d=""!==f?g+f+h:g+h}return d}function q(a,b){e.getPrivacyStatus()===e.PRIVACY_STATUS_OPT_IN&&(g.debug("[Message] Sending signal request ("+a.toString()+")"),ADBMobile_platform.httpRequestAsync(a,"POST",{"Content-type":"application/x-www-form-urlencoded"},b,2e3,function(a,b,c){200==a?g.debug("[Message] Successfully sent hit ("+c+")"):g.error("[Message] Unable to send hit ("+c+") response ("+b+")")}))}function r(a){var b,c=!0;for(b=0;b<a.length;b++){var d=a.charAt(b).toLowerCase();if(!this.validLetters[d]){c=!1;break}}return c}return a.prototype.shouldShowForVariables=function(a,b){var c={};if(b&&h.append(c,b),a&&h.append(c,a),h.append(c,l.call(this,c)),this.message[this.COMBINED_VARS]=c,this.message[this.JSON_CONFIG_START_DATE]&&ADBMobile_platform.getTimeSince1970()<this.message[this.JSON_CONFIG_START_DATE])return!1;if(this.message[this.JSON_CONFIG_END_DATE]&&ADBMobile_platform.getTimeSince1970()>this.message[this.JSON_CONFIG_END_DATE])return!1;var d=this.message[this.JSON_CONFIG_TRIGGERS];if(d)for(var e=k.call(this,b),f=0;f<d.length;++f){var g=d[f];if(!g.matchesInMaps(a,e))return!1}return!0},a.prototype.show=function(){var a=this.message[this.ADB_TEMPLATE_CALLBACK_URL],b=a,c=m.call(this,a),d=n.call(this,c,!0),e=["{%all_url%}"],f=n.call(this,e,!1);h.append(d,f),d&&(b=o.call(this,a,d));var g=this.message[this.ADB_TEMPLATE_CALLBACK_BODY],i=g;if(g){var j=ADBMobile_platform.decodeBase64String(g),k=m.call(this,j),l=this.message[this.ADB_TEMPLATE_CALLBACK_TYPE],p=!0;l&&-1!=l.toLowerCase().search("application/json")&&(p=!1);var r=n.call(this,k,p),s=[];s.push("{%all_url%}"),s.push("{%all_json%}");var t=n.call(this,s,!1);h.append(r,t),r&&(i=o.call(this,j,r))}q.call(this,b,i)},{Message:a}}(),p=function(){"use strict";function a(a,b,c){if(!n||!a||!b)return null;var d=null;switch(a){case"eq":d=n.MatcherEquals;break;case"ne":d=n.MatcherNotEquals;break;case"gt":d=n.MatcherGreaterThan;break;case"lt":d=n.MatcherLessThan;break;case"ge":d=n.MatcherGreaterThanOrEqual;break;case"le":d=n.MatcherLessThanOrEqual;break;case"co":d=n.MatcherContains;break;case"nc":d=n.MatcherNotContains;break;case"sw":d=n.MatcherStartsWith;break;case"ew":d=n.MatcherEndsWith;break;case"ex":d=n.MatcherExists;break;case"nx":d=n.MatcherNotExists}var e=b.toLowerCase();return d?new d(e,c):null}function b(b){return b&&(this._json=b,this._handler=a(b.matches,b.key,b.values)),this}return b.prototype.matchesInMaps=function(a,b){if(this._handler){var c={};return h.append(c,a),h.append(c,b),this._handler.matches(c)}return!1},{Matcher:b}}(),q=function(){function a(){k=[],l=!1,m=[]}function b(a){if(a){for(var b=[],c=0;c<a.length;++c)"callback"===a[c].template&&b.push(new o.Message(a[c]));k=b}}function c(){for(var a=0;a<m.length;++a)i(m[a].vars,m[a].cData);m=[],l=!0}
function d(){b(e.getMessages());var a=e.getRemotes();a&&a.messages?ADBMobile_platform.httpRequestAsync(a.messages,"GET",{},null,500,function(a,d){if(200==a&&d)try{b(JSON.parse(d).messages)}catch(e){g.debug("[Messages] Unable to parse remotes.message response ("+e+")")}c()}):c()}function f(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){var d=c.toLowerCase();b[d]=a[c]}return b}function i(a,b){try{if(k&&k.length>0)for(var c=f(a),d=f(b),e=0;e<k.length;++e){var h=k[e];h&&h.shouldShowForVariables(c,d)&&h.show()}}catch(i){g.warning("[Messages] checkFor3rdPartyCallbacks failed with exception "+i.message)}}function j(a,b){if(a&&b)return l?void i(a,b):void m.push({vars:h.clone(a),cData:h.clone(b)})}var k=[],l=!1,m=[];return{init:d,checkFor3rdPartyCallbacks:j,reset:a}}(),r={version:i,analytics:{trackState:b.trackState,trackAction:b.trackAction,getTrackingIdentifier:a.getAIDAsync},config:{setUserIdentifier:e.setUserIdentifier,getUserIdentifier:e.getUserIdentifier,getAllIdentifiersAsync:e.getAllIdentifiersAsync,setPrivacyStatus:e.setPrivacyStatus,getPrivacyStatus:e.getPrivacyStatus,setLoggerCallback:g.setLoggerCallback,setDebugLogging:g.setDebugLogging,getDebugLogging:g.getDebugLogging,PRIVACY_STATUS_OPT_IN:e.PRIVACY_STATUS_OPT_IN,PRIVACY_STATUS_OPT_OUT:e.PRIVACY_STATUS_OPT_OUT},visitor:{syncIdentifiers:j.idSync,getMarketingCloudID:j.getMarketingCloudIDAsync},audienceManager:{submitSignal:d.submitSignal,getVisitorProfile:d.getVisitorProfile,getDpid:d.getDpid,getDpuuid:d.getDpuuid,setDpidAndDpuuid:d.setDpidAndDpuuid},media:{setDelegate:k.setDelegate,trackSessionStart:k.trackSessionStart,trackPlay:k.trackPlay,trackPause:k.trackPause,trackError:k.trackError,trackEvent:k.trackEvent,trackComplete:k.trackComplete,trackSessionEnd:k.trackSessionEnd,StreamType:k.StreamType,MediaType:k.MediaType,PlayerState:k.PlayerState,Event:k.Event,MediaObjectKey:k.MediaObjectKey,VideoMetadataKeys:k.VideoMetadataKeys,AudioMetadataKeys:k.AudioMetadataKeys,AdMetadataKeys:k.AdMetadataKeys,createMediaObject:k.createMediaObject,createAdBreakObject:k.createAdBreakObject,createChapterObject:k.createChapterObject,createAdObject:k.createAdObject,createStateObject:k.createStateObject,createQoSObject:k.createQoSObject}};return e.init(),a.init(),j.init(),q.init(),k.init(),r}();