/*! ************************************************************************
 *
 * ADOBE CONFIDENTIAL
 * ___________________
 *
 *  Copyright 2017 Adobe Systems Incorporated
 *  All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 *
 * *************************************************************************/

/*! Copyright for external libraries used in ADBMobile library */
/*!
 * JavaScript MD5 1.0.1
 * https://github.com/blueimp/JavaScript-MD5
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 * 
 * Based on
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */
var _version=function(){return{codeVersion:"cc-js-2.0.0.51-952c5ab",mediaAPILevel:4}}(),ADBMobile_platform=function(){function a(a,b){if(!a)return null;try{return b?window.localStorage.setItem(a,b):window.localStorage.removeItem(a),b}catch(c){_logger.error("Failed to store data element: "+c)}return null}function b(a){if(!a)return null;try{return window.localStorage.getItem(a)}catch(b){_logger.error("Failed to retrieve data element: "+b)}return null}function c(a,b,c,d,e,f){if(!a)return _logger.error("HTTPRequestAsync - URL required but was not passed"),null;c=c||{},e=e||500,f=f||function(){};var g=new XMLHttpRequest;g.onreadystatechange=function(){4==g.readyState&&(f(g.status,g.responseText,d||a),f=function(){})},g.timeout=e,g.ontimeout=function(){f(0,null,a),f=function(){}},g.open(b,a,!0),Object.keys(c).forEach(function(a){g.setRequestHeader(a,this[a])},c),g.send(d)}function d(){return"Chromecast resolution"}function e(){return"undefined"!=typeof cast&&cast.receiver?cast.receiver.VERSION:"Chromecast OS"}function f(){return"Chromecast"}function g(){return"Chromecast App ID"}function h(){return g()}function i(){return Math.floor((new Date).getTime()/1e3)}function j(){return(new Date).getTime()}function k(){return(new Date).toISOString()}function l(){return"00/00/0000 00:00:00 0 "+(new Date).getTimezoneOffset()}function m(a,b){return setInterval(a,b)}function n(a){clearInterval(a)}function o(a){return window.btoa(a)}function p(a){return window.atob(a)}function q(a){var b;if(window.DOMParser){b=(new DOMParser).parseFromString(a,"text/xml")}return b}function r(a){return a.item(0)}return{httpRequestAsync:c,writeValue:a,readValue:b,getResolution:d,getDeviceName:f,getOSVersion:e,getAppID:g,getDefaultPageName:h,getTimeSince1970:i,getTimeSince1970Millis:j,getDateInISOString:k,getTimestampString:l,setInterval:m,clearInterval:n,encodeBase64String:o,decodeBase64String:p,parseXML:q,getBaseItem:r}}(),ADBMobile=function(){var a=function(){function a(){d=ADBMobile_platform.readValue("adb_aid"),f=ADBMobile_platform.readValue("adb_ignore_aid")}function b(){return"yxxxxxxxxxxxxxxx-zxxxxxxxxxxxxxxx".replace(/[xyz]/g,function(a){return"0123456789ABCDEF".charAt(Math.floor(Math.random()*({y:7,x:16,z:4}[a]||0)))})}function c(a){if(g.isFunction(a))return d?void a(d):f&&e.visitorIDServiceEnabled()?void a(null):void i.getMarketingCloudIDAsync(function(c){var f=(e.ssl()?"https":"http")+"://"+e.trackingServer()+"/id";c&&(f+=i.getAnalyticsIDRequestParameterString()),ADBMobile_platform.httpRequestAsync(f,"GET",{},null,500,function(c,f){200==c&&f&&(d=JSON.parse(f).id,ADBMobile_platform.writeValue("adb_aid",d)),!d&&e.visitorIDServiceEnabled()?ADBMobile_platform.writeValue("adb_ignore_aid",!0):ADBMobile_platform.readValue("adb_aid")||(d=b(),ADBMobile_platform.writeValue("adb_aid",d)),d&&e.visitorIDServiceEnabled()&&i.idSync({AVID:d}),a(d)})})}var d,f;return{init:a,getAIDAsync:c}}(),b=function(){function a(a,c){var d={};b(c)&&Object.keys(c).forEach(function(a){d[a]=this[a]},c),h(d,{pageName:a||ADBMobile_platform.getDefaultPageName()},ADBMobile_platform.getTimeSince1970())}function b(a){return null!==a&&(void 0!==a&&a.constructor==={}.constructor)}function d(a,c,d){var e={};b(c)&&Object.keys(c).forEach(function(a){e[a]=this[a]},c),e["a.internalaction"]=a;var f={pe:"lnk_o",pev2:"ADBINTERNAL:"+a,pageName:ADBMobile_platform.getDefaultPageName()};h(e,f,d)}function f(a,c){var d={};b(c)&&Object.keys(c).forEach(function(a){d[a]=this[a]},c),d["a.action"]=a;var e={pe:"lnk_o",pev2:"AMACTION:"+a,pageName:ADBMobile_platform.getDefaultPageName()};h(d,e,ADBMobile_platform.getTimeSince1970())}function h(a,b,d){if(e.analyticsEnabled()){a=a||{},b=b||{},d=d||ADBMobile_platform.getTimeSince1970(),a["a.Resolution"]=ADBMobile_platform.getResolution(),a["a.DeviceName"]=ADBMobile_platform.getDeviceName(),a["a.OSVersion"]=ADBMobile_platform.getOSVersion(),a["a.AppID"]=ADBMobile_platform.getAppID();var f=e.getUserIdentifier();f&&(b.vid=f),e.offlineTrackingEnabled()&&(b.ts=d),b.ce=e.characterSet(),b.t=ADBMobile_platform.getTimestampString(),Object.keys(a).forEach(function(a){"&&"===a.slice(0,2)&&(b[a.slice(2)]=this[a],delete this[a])},a);var h="ndh=1"+g.serializeParameters(b)+g.serializeContextData(a);c.queue(h,ADBMobile_platform.getTimeSince1970()),s.checkFor3rdPartyCallbacks(b,a)}}return{trackAction:f,trackState:a,trackInternal:d}}(),c=function(){function b(a,b){e.getPrivacyStatus()!=e.PRIVACY_STATUS_OPT_OUT?(f.debug("Analytics - Queued Hit("+a+")"),h.push({frag:a,ts:b}),c()):f.debug("Analytics - Not queueing hit. Privacy is not set to optedin.")}function c(){if(!j){j=!0;var b=h.shift();if(!b)return void(j=!1);if(!e.offlineTrackingEnabled()){var k=ADBMobile_platform.getTimeSince1970()-b.ts;if(k>60)return f.debug("Analytics - Hit is greater than 60 seconds old ("+k+"s), will be deleted ("+b.frag+")"),j=!1,void c()}i.idSync(null,function(e){var h=b.frag;e&&(h+=g.serializeParameters(i.getAnalyticsParameters())),a.getAIDAsync(function(a){a&&(h+=g.serializeKeyValuePair("aid",a)),ADBMobile_platform.httpRequestAsync(d(),"POST",{"Content-type":"application/x-www-form-urlencoded"},h,2e3,function(a,b,d){200==a?f.debug("Analytics - Successfully sent hit ("+d+")"):f.error("Analytics - Unable to send hit ("+d+") response ("+b+")"),j=!1,c()})})})}}function d(){var a=e.ssl()?"https":"http";return a+="://"+e.trackingServer()+"/b/ss/"+e.reportSuiteIDs()+"/0/"+_version.codeVersion+"/s"+Math.floor(1e7*Math.random())}var h=[],j=!1;return{queue:b}}(),d=function(){function a(){if(!t){t=!0;var b=s.shift();if(!b)return void(t=!1);ADBMobile_platform.httpRequestAsync(b,"GET",{},"",2e3,function(b,c,d){if(200==b){f.debug("Audience Manager - Successfully Sent Signal ("+d+"), response ("+c+")");var e=null;try{e=JSON.parse(c)}catch(j){f.debug("Audience Manager - Unable to parse response ("+j+")")}if(e){var g=e.uuid||null;g&&q(g);(e.dests||[]).map(function(a){var b=a.c||null;b&&(f.debug("Audience Manager - Forwarding 'dests' request ("+b+")"),ADBMobile_platform.httpRequestAsync(b,"GET",{},"",2e3,null))});var h=e.stuff||[],i={};h.map(function(a){var b=a.cn||null,c=a.cv||null;b&&c&&(i[b]=c)}),l(i)}}else f.error("Audience Manager - Unable to send signal ("+d+")");t=!1,a()})}}function b(b){if(e.audienceManagerEnabled())if(e.getPrivacyStatus()!=e.PRIVACY_STATUS_OPT_OUT){var d=c(b);f.debug("Audience Manager - Queued Signal("+d+")"),s.push(d),a()}else f.debug("Audience Manager - Not queueing hit. Privacy is not set to optedin.")}function c(a){return(d()+h(a)+j()+"&d_ptfm=appletv&d_dst=1&d_rtbd=json").replace(/\?\&/i,"?")}function d(){return e.ssl()?"https":"http://"+e.aamServer()+"/event?"}function h(a){a=a||{};var b="";return Object.keys(a).forEach(function(a){b+=g.serializeKeyValuePair(k(a),this[a])},a),b}function j(){var a="",b=r()||null;b&&(a+=g.serializeKeyValuePair("d_uuid",b));var c=o()||null,d=p()||null;return c&&d&&(a+=g.serializeKeyValuePair("d_dpid",c)+g.serializeKeyValuePair("d_dpuuid",d)),a+=i.getAAMParameterString()}function k(a){return a.replace("/./g","_")}function l(a){var b=JSON.stringify(a);ADBMobile_platform.writeValue("adb_aam_profile",b)}function m(){var a=ADBMobile_platform.readValue("adb_aam_profile");return JSON.parse(a)}function n(a,b){ADBMobile_platform.writeValue("adb_aam_dpid",a),ADBMobile_platform.writeValue("adb_aam_dpuuid",b)}function o(){return ADBMobile_platform.readValue("adb_aam_dpid")}function p(){return ADBMobile_platform.readValue("adb_aam_dpuuid")}function q(a){ADBMobile_platform.writeValue("adb_aam_uuid",a)}function r(){return ADBMobile_platform.readValue("adb_aam_uuid")}var s=[],t=!1;return{getUUID:r,getDpid:o,getDpuuid:p,setDpidAndDpuuid:n,getVisitorProfile:m,submitSignal:b}}(),e=function(){function a(){if(m=h()||null,m&&f.debug("Config - Found custom visitor id("+m+")"),"object"!=typeof ADBMobileConfig||null===ADBMobileConfig)return void f.error("Config - Unable to find defined ADBMobileConfig object.");"object"==typeof ADBMobileConfig.analytics&&(q=ADBMobileConfig.analytics.offlineEnabled||!1,n=ADBMobileConfig.analytics.server||null,o=ADBMobileConfig.analytics.rsids||null,p=ADBMobileConfig.analytics.ssl||!1,r=ADBMobileConfig.analytics.lifecycleTimeout||300,s=ADBMobileConfig.analytics.privacyDefault||"optedin"),f.debug((d(),"Enabled")),"object"==typeof ADBMobileConfig.audienceManager&&(t=ADBMobileConfig.audienceManager.server||null),f.debug((c(),"Enabled")),"object"==typeof ADBMobileConfig.marketingCloud&&(u=ADBMobileConfig.marketingCloud.org||null),f.debug((e(),"Enabled")),"object"==typeof ADBMobileConfig.mediaHeartbeat&&(v=ADBMobileConfig.mediaHeartbeat.server||null,w=ADBMobileConfig.mediaHeartbeat.publisher||null,x=ADBMobileConfig.mediaHeartbeat.channel||null,y=ADBMobileConfig.mediaHeartbeat.playerName||null,z=ADBMobileConfig.mediaHeartbeat.ssl||!1,A=ADBMobileConfig.mediaHeartbeat.ovp||null,B=ADBMobileConfig.mediaHeartbeat.sdkVersion||null),f.debug((b(),"Enabled")),"object"==typeof ADBMobileConfig.messages&&(C=ADBMobileConfig.messages),"object"==typeof ADBMobileConfig.remotes&&(D=ADBMobileConfig.remotes)}function b(){return!(!v||!d())}function c(){return!!t}function d(){return!(!n||!o)}function e(){return!!u}function g(a){ADBMobile_platform.writeValue("adb_vid",a),m=a}function h(){return m}function i(a){ADBMobile_platform.writeValue("adb_privacy",a)}function j(){var a=ADBMobile_platform.readValue("adb_privacy");return a||s}function k(){return C}function l(){return D}var m=null,n=null,o=null,p=!1,q=!1,r=300,s="optedin",t=null,u=null,v=null,w=null,x=null,y=null,z=!1,A=null,B=null,C=null,D=null;return{trackingServer:function(){return n},reportSuiteIDs:function(){return o},ssl:function(){return p},offlineTrackingEnabled:function(){return q},lifecycleTimeout:function(){return r},characterSet:function(){return"UTF-8"},privacyDefault:function(){return s},aamServer:function(){return t},marketingCloudOrganizationIdentifier:function(){return u},mTrackingServer:function(){return v},mPublisher:function(){return w},mChannel:function(){return x},mPlayerName:function(){return y},mSSL:function(){return z},mOVP:function(){return A},mSDK:function(){return B},audienceManagerEnabled:c,analyticsEnabled:d,visitorIDServiceEnabled:e,mediaHearbeatEnabled:b,setUserIdentifier:g,getUserIdentifier:h,setPrivacyStatus:i,getPrivacyStatus:j,getMessages:k,getRemotes:l,init:a}}();e.PRIVACY_STATUS_OPT_IN="optedin",e.PRIVACY_STATUS_OPT_OUT="optedout";var f=function(){function a(a){g.isFunction(a)&&(i=a)}function b(a){h=a}function c(){return h}function d(a){h&&(console.log("ADBMobile Warning: "+a),i&&i(a))}function e(a){h&&(console.log("ADBMobile Debug: "+a),i&&i(a))}function f(a){console.log("ADBMobile Error: "+a),i&&i(a)}var h=!1,i=null;return{setDebugLogging:b,getDebugLogging:c,setLoggerCallback:a,warning:d,debug:e,error:f}}(),g=function(){function a(a){return"&c."+d(e(a))+"&.c"}function b(a,b){return void 0!==b&&null!==b?"&"+encodeURIComponent(a)+"="+encodeURIComponent(b):""}function c(a){var c="";for(var d in a)c+=b(d,a[d]);return c}function d(a){var c="";return a=a||{},Object.keys(a).forEach(function(a){this[a].v&&(c+=b(a,this[a].v)),this[a].subValues&&(c+="&"+a+"."+d(this[a].subValues)+"&."+a)},a),c}function e(a){var b={},c=f(a);return Object.keys(c).forEach(function(a){var c=this[a];!function a(b,c,d,e){if(!(e>=d.length)){var f=d[e];if(c[f]||(c[f]={}),d.length-1==e)return void(c[f].v=b);c[f].subValues||(c[f].subValues={}),a(b,c[f].subValues,d,e+1)}}(c,b,a.split("."),0)},c),b}function f(a){var b={};return a=a||{},Object.keys(a).forEach(function(a){if("string"==typeof a){var c=a.replace(j,".").replace(k,"");c&&(b[c]=this[a])}},a),b}function g(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function h(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function i(a){return"function"==typeof a}var j=new RegExp("([.]){2,}","g"),k=new RegExp("[^0-9a-zA-Z._]|^[.]{1,}|[.]{1,}$","g");return{serializeContextData:a,serializeKeyValuePair:b,serializeParameters:c,isFunction:i,clone:g,append:h}}(),h={};!function(a){"use strict";var b=function(){return this._ts=ADBMobile_platform.getTimeSince1970Millis(),this._interval=null,this._name=null,this._enabled=!1,this._nextTick=null,this};b.prototype.start=function(a,b){this._enabled?f.debug("Timer -  "+this._name+" timer already started."):(f.debug("Timer - starting "+b+" timer with interval ("+a+")"),this._interval=a,this._name=b,this._ts=ADBMobile_platform.getTimeSince1970Millis(),this._nextTick=this._interval,this._enabled=!0)},b.prototype.stop=function(){this._enabled?(f.debug("Timer - stoping "+this._name+" timer."),this._enabled=!1,this._nextTick=0):f.debug("Timer -  "+this._name+" timer already stopped.")},b.prototype.restartWithNewInterval=function(a){f.debug("Timer - restarting "+this._name+" timer with interval ("+a+")"),this._interval=a,this._ts=ADBMobile_platform.getTimeSince1970Millis(),this._nextTick=this._interval,this._enabled=!0},b.prototype.reset=function(){f.debug("Timer - resetting "+this._name),this._ts=ADBMobile_platform.getTimeSince1970Millis(),this._nextTick=this._interval,this._enabled=!0},b.prototype.ticked=function(){var a=!1,b=ADBMobile_platform.getTimeSince1970Millis()-this._ts;return b>=this._nextTick&&(this._nextTick=b+this._interval,a=!0),a},b.prototype.elapsedTime=function(){return ADBMobile_platform.getTimeSince1970Millis()-this._ts},b.prototype.enabled=function(){return this._enabled},a.Timer=b}(h);var i=function(){function a(){k=ADBMobile_platform.readValue("adb_visitor_mid"),l=ADBMobile_platform.readValue("adb_visitor_blob"),m=ADBMobile_platform.readValue("adb_visitor_hint"),n=ADBMobile_platform.readValue("adb_visitor_ttl"),o=ADBMobile_platform.readValue("adb_visitor_sync")}function b(){return"yxxxxxxxxxxxxxxxxxxyxxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(a){return""+Math.floor(10*Math.random())}).replace(/[y]/g,function(a){return""+Math.floor(9*Math.random())})}function c(a,c){if(g.isFunction(c)||(c=function(){}),!e.visitorIDServiceEnabled())return void c(null);var d=e.marketingCloudOrganizationIdentifier(),h=ADBMobile_platform.getTimeSince1970()-o>n;if(k&&!a&&!h)return void c(k);var i=e.ssl()?"https":"http";i+="://dpm.demdex.net/id?d_rtbd=json&d_ver=2&d_orgid="+d,l&&(i+=g.serializeKeyValuePair("d_blob",l)),k&&(i+=g.serializeKeyValuePair("d_mid",k)),m&&(i+=g.serializeKeyValuePair("dcs_region",m)),a&&Object.keys(a).forEach(function(a){i+="&d_cid_ic="+encodeURIComponent(a)+"%01"+encodeURIComponent(this[a])},a),f.debug("ID Service - Sending id sync call ("+i+")"),ADBMobile_platform.httpRequestAsync(i,"GET",{},null,2e3,function(a,d){if(200==a)if(d){f.debug("ID Service - Received received response from server ("+d+")");var e;try{e=JSON.parse(d)}catch(g){e=null}e?e.error_msg?f.error("ID Service - Error received from server("+e.error_msg+")"):e.d_mid?(k=e.d_mid,l=e.d_blob,m=e.dcs_region,n=e.id_sync_ttl||0):(k=b(),l=null,m=null,n=600):f.error("ID Service - Unable to parse response("+d+")")}else f.error("ID Service - Blank response from sync call");else f.error("ID Service - Failed id sync call ("+a+")");o=ADBMobile_platform.getTimeSince1970(),ADBMobile_platform.writeValue("adb_visitor_mid",k),ADBMobile_platform.writeValue("adb_visitor_blob",l),ADBMobile_platform.writeValue("adb_visitor_hint",m),ADBMobile_platform.writeValue("adb_visitor_ttl",n),ADBMobile_platform.writeValue("adb_visitor_sync",o),c(k)})}function d(a){if(g.isFunction(a))return e.visitorIDServiceEnabled()?void c(null,a):void a(null)}function h(){return k?"?mid="+k+"&mcorgid="+e.marketingCloudOrganizationIdentifier():""}function i(){var a={};return k?(a.mid=k,l&&(a.aamb=l),m&&(a.aamlh=m),a):a}function j(){var a="";return k?(a+=g.serializeKeyValuePair("d_mid",k),l&&(a+=g.serializeKeyValuePair("d_blob",l)),m&&(a+=g.serializeKeyValuePair("dcs_region",m)),a):a}var k,l,m,n,o;return{init:a,getMarketingCloudIDAsync:d,idSync:c,getAnalyticsParameters:i,getAnalyticsIDRequestParameterString:h,getAAMParameterString:j}}(),j=function(){function a(a){e.getPrivacyStatus()!=e.PRIVACY_STATUS_OPT_OUT?(f.debug("MediaHeartbeat - Queued Hit"),this._queue.push(a),h.call(this)):f.debug("MediaHeartbeat - Not queueing hit. Privacy is not set to optedin.")}function b(a){e.getPrivacyStatus()!=e.PRIVACY_STATUS_OPT_OUT?(f.debug("MediaHeartbeat - Queued Hit"),this._asyncQueue.push(a)):f.debug("MediaHeartbeat - Not queueing hit. Privacy is not set to optedin.")}function c(){if(this._asyncQueue.length>0){f.debug("MediaHeartbeat - Flush requests. Pending requests:"+this._asyncQueue.length);var a=function(a,b,c){};for(var b in this._asyncQueue)if(this._asyncQueue.hasOwnProperty(b)){var c=i.call(this,this._asyncQueue[b]);f.debug("MediaHeartbeat - Sending the Media Heartbeat Hit ("+c+")"),ADBMobile_platform.httpRequestAsync(c,"GET",{},"",2e3,a)}this._asyncQueue=[]}}function d(a,b,c){if(200==a)if(f.debug("MediaHeartbeat - Successfully sent hit with response data:"+b),b){var d=ADBMobile_platform.parseXML(b),e={};f.debug("MediaHeartbeat - XML response ("+d+")");var g=d.getElementsByTagName("trackingInterval");g&&g.length>0&&(e.trackingInterval=parseInt(ADBMobile_platform.getBaseItem(g).textContent)),g=d.getElementsByTagName("trackExternalErrors"),g&&g.length>0&&(e.trackExternalErrors=parseInt(ADBMobile_platform.getBaseItem(g).textContent)),g=d.getElementsByTagName("setupCheckInterval"),g&&g.length>0&&(e.setupCheckInterval=parseInt(ADBMobile_platform.getBaseItem(g).textContent)),k.updateCheckStatusInterval(e)}else f.debug("MediaHeartbeat - Empty or invalid XML response received");else f.error("MediaHeartbeat - Unable to send hit: "+c),f.debug("MediaHeartbeat - Response code "+a);this._currentHit=null,h.call(this)}function h(){if(this._queue.length>0&&!this._currentHit){this._currentHit=this._queue.shift();var a=this,b=i.call(this,this._currentHit);f.debug("MediaHeartbeat - Sending the Media Heartbeat Hit ("+b+")"),ADBMobile_platform.httpRequestAsync(b,"GET",{},"",2e3,function(b,c,e){d.call(a,b,c,e)})}}function i(a){var b=!1;a.r&&(b=!0);var c=g.serializeParameters(a);return c.length>2&&(c=c.substring(1)),j.call(this,b)+c}function j(a){var b="";if(e.mTrackingServer){if(b=e.mSSL()?"https":"http",b=b+"://"+e.mTrackingServer(),a){b=b+"/settings/"+e.mPublisher().replace(m,"-")+".xml"}b+="?"}return b}function l(){this._asyncQueue=[],this._queue=[],this._currentHit=null}var m=new RegExp("[^a-zA-Z0-9]+","g");return{init:l,queueRequestsForResponse:a,queueAsyncRequest:b,flushAsyncRequests:c}}(),k=function(){function a(a){a.setupCheckInterval?"number"==typeof a.setupCheckInterval?(f.debug("ClockService -  updating the check status interval to: "+a.setupCheckInterval),this._checkStatusInterval=1e3*a.setupCheckInterval,this._checkStatusTimer.restartWithNewInterval(this._checkStatusInterval)):f.debug("ClockService -  updateCheckStatusInterval: interval not an Integer"):f.debug("ClockService -  updateCheckStatusInterval: setupCheckInterval is invalid")}function b(){return!!this._checkStatusTimer.ticked()}function c(){return!!this._reportingTimer.ticked()}function d(){return!!this._flushFilterTimer.ticked()}function e(){return!(!this._playheadTimer.enabled()||!this._playheadTimer.ticked())}function g(){this._checkStatusTimer.start(this._checkStatusInterval,this._checkstatus_timer);var a={r:ADBMobile_platform.getTimeSince1970()};j.queueRequestsForResponse(a),this._reportingTimer.start(this._reportingInterval,this._reporting_timer),this._flushFilterTimer.start(this._flushFilterInterval,this._flushfilter_timer),this._active=!0,this._intervalContext=this._intervalContext=ADBMobile_platform.setInterval(function(){s.call(k)},250)}function i(){j.flushAsyncRequests(),this.isActive()&&(this._checkStatusTimer.stop(),this._reportingTimer.stop(),this._flushFilterTimer.stop(),this._playheadTimer.stop(),this._active=!1,ADBMobile_platform.clearInterval(this._intervalContext))}function n(){this._checkStatusTimer.reset(),this._reportingTimer.reset(),this._flushFilterTimer.reset()}function o(){return this._active}function p(a){return a==this._reporting_timer?this._reportingTimer:a==this._checkstatus_timer?this._checkStatusTimer:a==this._flushfilter_timer?this._flushFilterTimer:a==this._playhead_timer?this._playheadTimer:null}function q(){this._playheadTimer.start(this._playheadInterval,this._playhead_timer)}function r(){this._playheadTimer.stop()}function s(){if(this.isActive()){if(this.checkStatusTimerTick()){f.debug("ClockServiceLoop - Check Status Timer Ticked");var a={r:ADBMobile_platform.getTimeSince1970()};j.queueRequestsForResponse(a)}this.flushFilterTimerTick()&&j.flushAsyncRequests(),this.reportingTimerTick()&&(m.isSeeking()?f.debug("ClockServiceLoop - Reporting timer ticked but ADBMedia is in Seeking state."):(f.debug("ClockServiceLoop - Reporting Timer Ticked"),l._trackPlaybackState())),this.playheadTimerTick()&&l._detectPlayheadStall()}else f.debug("ClockServiceLoop -  ClockService not initialized yet")}function t(){this._ts=ADBMobile_platform.getTimeSince1970(),this._checkStatusInterval=6e4,this._reportingInterval=1e4,this._flushFilterInterval=250,this._playheadInterval=1e3,this._active=!1,this._reporting_timer="ReportingTimer",this._checkstatus_timer="CheckStatusTimer",this._flushfilter_timer="FlushFilterTimer",this._playhead_timer="PlayheadTimer";var a=h.Timer;this._checkStatusTimer=new a,this._reportingTimer=new a,this._flushFilterTimer=new a,this._playheadTimer=new a}return{updateCheckStatusInterval:a,checkStatusTimerTick:b,reportingTimerTick:c,flushFilterTimerTick:d,playheadTimerTick:e,startClockService:g,stopClockService:i,startPlayheadTimer:q,stopPlayheadTimer:r,resetClockService:n,isActive:o,getTimer:p,init:t}}(),l=function(){function a(a,b,c,d){var e=new ha;return e.name=a,e.id=b,e.length=c,e.streamType=d,e}function c(a,b,c,d){var e=new ka;return e.name=a,e.position=b,e.startTime=c,e.playerName=d,e}function d(a,b,c,d){var e=new ia;return e.name=a,e.id=b,e.position=c,e.length=d,e}function h(a,b,c,d){var e=new ja;return e.name=a,e.position=b,e.length=c,e.offset=d,e}function i(a,b,c,d){var e=new la;return e.bitrate=a,e.startupTime=b,e.fps=c,e.droppedFrames=d,e}function o(){k.init(),j.init(),n.init(),m.init(),this._isEnabled=e.mediaHearbeatEnabled(),this._isTrackingSuspended=!1,this._previousPlayhead=-1,this._stalledPlayheadCount=0}function p(){this._isEnabled=!0}function q(){return this._isEnabled}function r(){this._isEnabled=!1}function s(a,b){if(f.debug("#_trackSessionStart()"),!m.getDelegate())return f.debug("trackSessionStart: Setting ADB Media module to error state as no delegate is set."),void r.call(this);D.call(this,a,b),C.call(this)}function t(){f.debug("#_trackSessionEnd()"),E.call(this)}function u(){f.debug("$_trackPlayheadStall()"),aa.call(this),m.setInStall(!0),m.resetAssetRefContext()}function v(){f.debug("#_trackPlayheadStallComplete()"),aa.call(this),m.setInStall(!1),m.resetAssetRefContext()}function w(){f.debug("$_resumeStallTracking()"),k.startPlayheadTimer()}function x(){f.debug("$_suspendStallTracking()"),k.stopPlayheadTimer(),m.setInStall(!1),this._stalledPlayheadCount=0}function y(){if(q.call(this)&&!m.isInAd()){var a=m.getCurrentPlayhead();a!=this._previousPlayhead?(this._stalledPlayheadCount=0,m.isInStall()&&v.call(this)):this._previousPlayhead>=0&&!m.isInStall()&&++this._stalledPlayheadCount>=ma&&u.call(this),this._previousPlayhead=a}}function z(){f.debug("$_suspendTracking()"),this._isTrackingSuspended=!0}function A(){f.debug("$_resumeTracking()"),n.resetSessionIds();var a,b,c,d,e=null,g=!1;m.isInAd()&&(d=!0,a=m.getAdInfo(),b=m.getAdContextData(),c=m.getAdBreakInfo()),m.isInChapter()&&(g=!0,e=m.getChapterInfo(),chapterData=m.getChapterContextData()),m.resetToResumeState(),B.call(this,!0),g&&(m.setInChapterTo(!0),m.setChapterInfo(e),m.setChapterContextData(chapterData),T.call(this)),d&&(m.setInAdTo(!0),m.setAdBreakInfo(c),m.setAdInfo(a),m.setAdContextData(b),X.call(this)),this._isTrackingSuspended=!1}function B(a){f.debug("$_trackStartInternal()");var c=n.resolveDataForEvent(n._media_start);j.queueAsyncRequest(c);var d=n.getContextData("start");b.trackAction("",d);var e=n.resolveDataForEvent(n._aa_start);if(j.queueAsyncRequest(e),a){var g=n.resolveDataForEvent("resume");j.queueAsyncRequest(g)}}function C(){if(f.debug("#_trackStart()"),e.mediaHearbeatEnabled()&&q.call(this)){k.startClockService();var a=m.getMediaInfo(),b=a&&a[l.MediaObjectKey.VideoResumed];B.call(this,b),m.setActiveSession(!0),m.resetAssetRefContext()}else f.debug("trackStart: ADB Media module is in error state.")}function D(a,b){if(f.debug("#_trackLoad()"),e.mediaHearbeatEnabled()){q.call(this)||p.call(this),m.setMediaInfo(a);var c={};b&&"object"==typeof b&&g.append(c,b);var d=a&&"object"==typeof a?a[da.StandardVideoMetadata]:null;d&&"object"==typeof d&&g.append(c,d),m.setMediaContextData(c),m.isActiveTracking()&&(f.warning("trackLoad: Resetting current tracking session."),m.resetState()),m.setIsActiveTracking(!0)}else f.debug("trackLoad: ADB Media module is in error state.")}function E(){f.debug("#_trackUnload()"),m.isActiveTracking()||f.debug("trackUnload: No active tracking session."),m.setIsActiveTracking(!1),m.setActiveSession(!1),m.resetState(),k.stopClockService()}function F(){f.debug("#_trackPlay()"),e.mediaHearbeatEnabled()&&q.call(this)?(aa.call(this),m.setInPaused(!1),m.resetAssetRefContext(),G.call(this),w.call(this)):f.debug("trackPlay: ADB Media module is in error state")}function G(){if(f.debug("#_trackPlaybackState()"),e.mediaHearbeatEnabled()&&q.call(this)){if(m.isActiveSession()||C.call(this),this._isTrackingSuspended){if(m.isVideoIdle())return void f.debug("#_trackPlaybackState: [Video idle] Stays in suspendTracking");f.debug("#_trackPlaybackState: [Video resumes] suspendTracking -> resumeTracking"),A.call(this)}if(m.isVideoIdle()&&m.getDurationSinceIdleState()>na)return f.debug("#_trackPlaybackState: [Video idle] Enters suspendTracking"),void z.call(this);var a=n.resolveDataForEvent(m.getCurrentPlaybackState());j.queueAsyncRequest(a),m.resetAssetRefContext()}else f.debug("trackPlaybackState: ADB Media module is in error state.")}function H(){f.debug("#_trackPause()"),e.mediaHearbeatEnabled()&&q.call(this)?(aa.call(this),x.call(this),m.setInPaused(!0),m.resetAssetRefContext(),G.call(this)):f.debug("trackPause: ADB Media module is in error state.")}function I(){if(f.debug("#_trackComplete()"),e.mediaHearbeatEnabled()&&q.call(this)){aa.call(this),x.call(this);var a=n.resolveDataForEvent(n._media_complete);j.queueAsyncRequest(a)}else f.debug("trackComplete: ADB Media module is in error state.")}function J(a,b){f.debug("#_trackError("+a+","+b+")");var c=n.resolveDataForEvent(n._error);c["s:event:source"]=b,c["s:event:id"]=a,j.queueAsyncRequest(c)}function K(a,b,c){f.debug("#_trackMediaEvent("+a+")"),e.mediaHearbeatEnabled()&&q.call(this)?a==ca.BufferStart?P.call(this):a==ca.BufferComplete?Q.call(this):a==ca.SeekStart?R.call(this):a==ca.SeekComplete?S.call(this):a==ca.BitrateChange?_.call(this):a==ca.ChapterStart?U.call(this,b,c):a==ca.ChapterComplete?V.call(this):a==ca.ChapterSkip?W.call(this):a==ca.AdBreakStart?M.call(this,b):a==ca.AdBreakComplete?N.call(this):a==ca.AdBreakSkip?O.call(this):a==ca.AdStart?Y.call(this,b,c):a==ca.AdComplete?Z.call(this):a==ca.AdSkip?$.call(this):f.debug("trackMediaEvent: Unknown media event: "+a):f.debug("trackMediaEvent: ADB Media module is in error state.")}function L(a){e.mediaHearbeatEnabled()?m.setDelegate(a):f.debug("setDelegate: ADB Media module is in error state.")}function M(a){f.debug("#_trackAdBreakStart()"),m.setAdBreakInfo(a)}function N(){f.debug("#_trackAdBreakComplete()"),m.setAdBreakInfo(null)}function O(){f.debug("#_trackAdBreakSkip()"),m.setAdBreakInfo(null)}function P(){f.debug("#_trackBufferStart()"),aa.call(this),x.call(this),m.setInBuffering(!0),m.resetAssetRefContext(),G.call(this)}function Q(){f.debug("#_trackBufferComplete()"),aa.call(this),m.setInBuffering(!1),m.resetAssetRefContext(),G.call(this),m.isPlaying()&&w.call(this)}function R(){f.debug("#_trackSeekStart()"),aa.call(this),x.call(this),m.setInSeeking(!0)}function S(){if(f.debug("#_trackSeekComplete()"),m.isSeeking()){var a=k.getTimer(k._reporting_timer);a&&a.reset(),m.setInSeeking(!1),m.isPlaying()&&w.call(this)}else f.warning("trackMediaEvent: SEEK_COMPLETE - Not in seek state, nothing to do.")}function T(){f.debug("#_trackChapterStartInternal()");var a=n.resolveDataForEvent(n._chapter_start);j.queueAsyncRequest(a)}function U(a,b){f.debug("#_trackChapterStart()"),aa.call(this),m.setInChapterTo(!0),m.setChapterInfo(a),m.setChapterContextData(b),T.call(this),m.resetAssetRefContext(),m.isPlaying()&&G.call(this)}function V(){f.debug("#_trackChapterComplete()"),aa.call(this);var a=n.resolveDataForEvent(n._chapter_complete);j.queueAsyncRequest(a),m.setInChapterTo(!1),m.setChapterInfo(null),m.setChapterContextData(null),m.resetAssetRefContext()}function W(){f.debug("#_trackChapterSkip()"),m.setInChapterTo(!1),m.setChapterInfo(null),m.setChapterContextData(null)}function X(){f.debug("#_trackAdStartInternal()");var a=n.resolveDataForEvent(n._ad_start);j.queueAsyncRequest(a);var c=n.getContextData("ad-start");b.trackAction("",c);var d=n.resolveDataForEvent(n._aa_ad_start);j.queueAsyncRequest(d)}function Y(a,b){f.debug("#_trackAdStart()"),aa.call(this),m.setInAdTo(!0),m.setAdInfo(a);var c={};b&&"object"==typeof b&&g.append(c,b);var d=a&&"object"==typeof a?a[da.StandardAdMetadata]:null;d&&"object"==typeof d&&g.append(c,d),m.setAdContextData(c),X.call(this),m.resetAssetRefContext(),m.isPlaying()&&G.call(this)}function Z(){f.debug("#_trackAdComplete()"),aa.call(this);var a=n.resolveDataForEvent(n._ad_complete);j.queueAsyncRequest(a),m.setInAdTo(!1),m.setAdContextData(null),m.setAdInfo(null),m.resetAssetRefContext()}function $(){f.debug("#_trackAdSkip()"),m.setInAdTo(!1),m.setAdInfo(null),m.setAdContextData(null)}function _(){f.debug("#_trackBitrateChange()");var a=n.resolveDataForEvent(n._bitrate_change);j.queueAsyncRequest(a)}function aa(){var a=k.getTimer(k._reporting_timer);a&&a.elapsedTime()>250&&(G.call(this),a.reset())}var ba={SourceApplication:"sourceErrorExternal",SourcePlayer:"sourceErrorSDK"},ca={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdBreakSkip:"adBreakSkip",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange"},da={StandardVideoMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed"},ea={VOD:"vod",LIVE:"live",LINEAR:"linear"},fa={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},ga={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"},ha=function(){this.id="",this.name="",this.length=0,this.streamType=ea.VOD},ia=function(){this.id="",this.name="",this.length=0,this.position=0},ja=function(){this.name="",this.length=0,this.position=0,this.offset=0},ka=function(){this.name=null,this.startTime=null,this.position=0,this.playerName=null},la=function(){this.bitrate=0,this.fps=0,this.droppedFrames=0,this.startupTime=0},ma=2,na=18e5,oa={init:function(){o.call(l)},enable:function(){p.call(l)},isEnabled:function(){return q.call(l)},disable:function(){r.call(l)},trackSessionStart:function(a,b){s.call(l,a,b)},trackSessionEnd:function(){t.call(this)},trackStart:function(){C.call(l)},trackLoad:function(a,b){D.call(l,a,b)},trackUnload:function(){E.call(l)},trackPlay:function(){F.call(l)},trackPause:function(){
H.call(l)},trackComplete:function(){I.call(l)},trackError:function(a){J.call(l,a||"unknown_error_id",ba.SourcePlayer)},trackEvent:function(a,b,c){K.call(l,a,b,c)},setDelegate:function(a){L.call(l,a)},_trackPlaybackState:function(){G.call(l)},_detectPlayheadStall:function(){y.call(l)}};return oa.StreamType=ea,oa.Event=ca,oa.MediaObjectKey=da,oa.VideoMetadataKeys=fa,oa.AdMetadataKeys=ga,oa.Error=ba,oa.createMediaObject=a,oa.createAdBreakObject=c,oa.createChapterObject=h,oa.createAdObject=d,oa.createQoSObject=i,oa.MediaInfo=ha,oa.AdInfo=ia,oa.ChapterInfo=ja,oa.AdBreakInfo=ka,oa.QoSInfo=la,oa}(),m=function(){function b(){this.delegate=null,this.resetState()}function c(a){this.isInAdValue=a}function d(a){this._isActiveTrackingValue=a}function g(a){this.isInChapterValue=a}function h(){return this._isActiveTrackingValue}function j(a){this._isBufferingValue=a,X.call(this)}function k(){return this._isBufferingValue}function m(a){this._isPausedValue=a,a||(this._isPlayStartedValue=!0),X.call(this)}function p(){return this._isPausedValue}function q(){return!this._isPausedValue&&this._isPlayStartedValue}function r(a){this._isSeekingValue=a,X.call(this)}function s(){return this._isSeekingValue}function t(a){this._isInStallValue=a,X.call(this)}function u(){return this._isInStallValue}function v(){return this.isInAdValue}function w(){return this.isInChapterValue}function x(){return this._isSessionActive}function y(a){this._isSessionActive=a}function z(){var a=this.currMediaInfo;return a?o.isValidMediaInfoObject(a)||(f.warning("Media - MediaInfo object is not valid"),a=null):f.warning("Media - MediaInfo object not set."),a}function A(){var a=this.currAdBreakInfo;return a?o.isValidAdBreakInfoObject(a)||(f.warning("Media - AdBreakInfo object is not valid"),a=new l.AdBreakInfo,a._isEmptyAdBreak=!0):(f.warning("Media - AdBreakInfo object not set."),a=new l.AdBreakInfo,a._isEmptyAdBreak=!0),a}function B(){var a=this.currAdInfo;return a?o.isValidAdInfoObject(a)||(f.warning("Media - AdInfo object is not valid"),a=null):f.warning("Media - AdInfo object not set."),a}function C(){var a=this.currChapterInfo;return a?o.isValidChapterInfoObject(a)||(f.warning("Media - ChapterInfo object is not valid"),a=null):f.warning("Media - ChapterInfo object not set."),a}function D(){var a;return this.delegate&&"function"==typeof this.delegate.getQoSObject?a=this.delegate.getQoSObject():this.delegate&&"function"==typeof this.delegate.getQoSInfo&&(a=this.delegate.getQoSInfo()),a?o.isValidQoSInfoObject(a)||(f.warning("Media - QoSInfo object is not valid"),a=null):f.warning("Media - QoSInfo object not set."),a}function E(){var a=this.currMediaContextData;return a||f.debug("Media - Media context data is not set."),a}function F(){var a=this.currChapterContextData;return a||f.debug("Media - Chapter context data is not set."),a}function G(){var a=this.currAdContextData;return a||f.debug("Media - Ad context data is not set."),a}function H(a){this.currMediaInfo=a}function I(a){this.currAdBreakInfo=a}function J(a){this.currAdInfo=a}function K(a){this.currChapterInfo=a}function L(a){this.currMediaContextData=a}function M(a){this.currAdContextData=a}function N(a){this.currChapterContextData=a}function O(){this.eventTSMap={},this.assetRefContext={},this.setInAdTo(!1),this.setAdInfo(null),this.setAdContextData(null),this.setInChapterTo(!1),this.setChapterInfo(null),this.setChapterContextData(null),this.setAdBreakInfo(null)}function P(){this.setIsActiveTracking(!1),this.setActiveSession(!1),this._isPlayStartedValue=!1,this._isBufferingValue=!1,this._isInStallValue=!1,this._isPausedValue=!1,this._isSeekingValue=!1,this._isVideoIdleValue=!1,this._idleStateTS=ADBMobile_platform.getTimeSince1970Millis(),this._playhead=0,this.mid=null,this.mid_start=!1,this.aid=null,this.aid_start=!1,this.setMediaInfo(null),this.setMediaContextData(null),O.call(this)}function Q(){this.assetRefContext.state=W.call(this),this.assetRefContext.ts=ADBMobile_platform.getTimeSince1970Millis(),this.assetRefContext.playhead=this._playhead}function R(){return this.assetRefContext}function S(a,b){this.eventTSMap[a]=b}function T(a){a&&(!a||"function"!=typeof a.getCurrentPlaybackTime||"function"!=typeof a.getQoSInfo&&"function"!=typeof a.getQoSObject)?f.error("Media - setDelegate error. The delegate object is required to have the following functions: getCurrentPlaybackTime, getQoSInfo"):this.delegate=a}function U(){return this.delegate}function V(){return this.delegate?(this._playhead=this.delegate.getCurrentPlaybackTime(),this._playhead):(f.error("Media - Please set the media delegate before starting the video tracking."),-1)}function W(){return this.isInStall()?n._player_event_stall:this.isBuffering()?n._player_event_buffer:this.isPaused()||this.isSeeking()?n._player_event_pause:this.isPlaying()?n._player_event_play:n._player_event_start}function X(){var a=this.isPaused()||this.isBuffering()||this.isSeeking()||this.isInStall();a!=this.isVideoIdle()&&(this._idleStateTS=ADBMobile_platform.getTimeSince1970Millis()),this._isVideoIdleValue=a}function Y(){if(this.isVideoIdle()){var a=this._idleStateTS;return ADBMobile_platform.getTimeSince1970Millis()-a}return 0}function Z(){return this._isVideoIdleValue}function $(a){return this.eventTSMap[a]||(this.eventTSMap[a]="-1"),this.eventTSMap[a]}function _(){if(!this.mid_start){var a=this;this.mid_start=!0,i.getMarketingCloudIDAsync(function(b){a.mid=b})}return this.mid}function aa(){if(!this.aid_start){var b=this;this.aid_start=!0,a.getAIDAsync(function(a){b.aid=a})}return this.aid}function ba(){return e.getUserIdentifier()}return{init:b,setInAdTo:c,setIsActiveTracking:d,setInChapterTo:g,isActiveTracking:h,isPaused:p,isPlaying:q,isSeeking:s,isBuffering:k,isInStall:u,isInAd:v,isInChapter:w,isActiveSession:x,setActiveSession:y,setInPaused:m,setInSeeking:r,setInBuffering:j,setInStall:t,getMediaInfo:z,getAdBreakInfo:A,getAdInfo:B,getChapterInfo:C,getQoSInfo:D,getMediaContextData:E,getChapterContextData:F,getAdContextData:G,setMediaInfo:H,setAdBreakInfo:I,setAdInfo:J,setChapterInfo:K,setMediaContextData:L,setAdContextData:M,setChapterContextData:N,resetState:P,resetToResumeState:O,resetAssetRefContext:Q,updateTimeStampForEvent:S,getCurrentPlayhead:V,getCurrentPlaybackState:W,getAssetRefContext:R,getTimeStampForEvent:$,getDurationSinceIdleState:Y,isVideoIdle:Z,getVisitorID:_,getAdobeAnalyticsID:aa,getUserID:ba,setDelegate:T,getDelegate:U}}(),n=function(){function a(){var a={};return a[this._analytics_rsid]=null,a[this._analytics_trackingserver]=null,a[this._analytics_ssl]=null,a[this._user_aid]=null,a[this._user_mid]=null,a[this._user_vid]=null,a[this._cuser_id]=null,a[this._cuser_puuid]=null,a[this._service_ovp]=null,a[this._service_sdk]=null,a[this._service_channel]=null,a[this._service_playername]=null,a[this._service_hbversion]=null,a[this._service_apilevel]=null,a[this._event_sid]=null,a[this._event_type]=null,a[this._event_duration]=null,a[this._event_playhead]=null,a[this._event_ts]=null,a[this._event_prevts]=null,a[this._asset_type]=null,a[this._asset_mediaid]=null,a[this._asset_publisher]=null,a[this._asset_length]=null,a[this._asset_name]=null,a[this._asset_adid]=null,a[this._asset_adsid]=null,a[this._asset_adname]=null,a[this._asset_adlength]=null,a[this._asset_resolver]=null,a[this._asset_podid]=null,a[this._asset_podposition]=null,a[this._asset_podname]=null,a[this._asset_podoffset]=null,a[this._stream_chapterid]=null,a[this._stream_chaptersid]=null,a[this._stream_chaptername]=null,a[this._stream_chapterpos]=null,a[this._stream_chapterlength]=null,a[this._stream_chapteroffset]=null,a[this._stream_type]=null,a[this._stream_bitrate]=null,a[this._stream_fps]=null,a[this._stream_droppedFrames]=null,a[this._stream_startup_time]=null,a}function b(b){var c=a.call(this);return n.call(this,c),o.call(this,c),p.call(this,c),q.call(this,c),s.call(this,c),r.call(this,c),c[this._event_sid]=C.call(this),b==this._aa_start?(t.call(this,c,b),l.call(this,c)):b==this._aa_ad_start?t.call(this,c,b):b==this._media_start?(t.call(this,c,"start"),y.call(this,c)):b==this._ad_start?(this._adSessionIdValue=null,t.call(this,c,"start"),y.call(this,c)):b==this._ad_complete?t.call(this,c,"complete"):b==this._chapter_start?(this._chapterSessionIdValue=null,t.call(this,c,b),y.call(this,c)):b==this._chapter_complete?t.call(this,c,b):b==this._bitrate_change?t.call(this,c,b):b==this._media_complete?(t.call(this,c,"complete"),this._mediaSessionIdValue=null):t.call(this,c,b),m.isInAd()&&w.call(this,c),m.isInChapter()&&x.call(this,c),u.call(this,c,b),v.call(this,c,b),c}function c(a){var b,c,f={};if("start"==a)b=m.getMediaContextData(),b&&g.append(f,b),c=m.getMediaInfo(),f["a.contentType"]=c.streamType,f["a.media.name"]=c.id,f["a.media.friendlyName"]=c.name,f["a.media.length"]=Math.floor(c.length)||"0",f["a.media.playerName"]=e.mPlayerName(),f["a.media.channel"]=e.mChannel(),f["a.media.vsid"]=C.call(this),f["a.media.view"]="true",f["&&pev3"]="video",f["&&pe"]="ms_s",d.getDpid()&&(f["&&cid.userId.id"]=d.getDpid()),d.getDpuuid()&&(f["&&cid.puuid.id"]=d.getDpuuid());else if("ad-start"==a){b=m.getMediaContextData();var i=m.getAdContextData();b&&g.append(f,b),i&&g.append(f,i),c=m.getMediaInfo();var j=m.getAdInfo(),k=m.getAdBreakInfo(),l=h.md5(c.id),n=l+"_"+(k.position||""),o=void 0===k.startTime?m.getCurrentPlayhead():k.startTime;f["a.contentType"]=c.streamType,f["a.media.name"]=c.id,f["a.media.friendlyName"]=c.name,f["a.media.length"]=Math.floor(c.length)||"0",f["a.media.playerName"]=e.mPlayerName(),f["a.media.channel"]=e.mChannel(),f["a.media.vsid"]=C.call(this),f["a.media.ad.name"]=j.id,f["a.media.ad.friendlyName"]=j.name,f["a.media.ad.podFriendlyName"]=k.name||"",f["a.media.ad.length"]=Math.floor(j.length)||"0",f["a.media.ad.playerName"]=k.playerName||e.mPlayerName(),f["a.media.ad.pod"]=n,f["a.media.ad.podPosition"]=Math.floor(j.position)||"0",f["a.media.ad.podSecond"]=Math.floor(o)||"0",f["a.media.ad.view"]=!0,f["&&pev3"]="videoAd",f["&&pe"]="msa_s",d.getDpid()&&(f["&&cid.userId.id"]=d.getDpid()),d.getDpuuid()&&(f["&&cid.puuid.id"]=d.getDpuuid())}return f}function j(){this._mediaSessionIdValue=null,this._adSessionIdValue=null,this._chapterSessionIdValue=null}function l(a){d.getDpid()&&(a[this._cuser_id]=d.getDpid()),d.getDpuuid()&&(a[this._cuser_puuid]=d.getDpuuid())}function n(a){a[this._analytics_rsid]=e.reportSuiteIDs(),a[this._analytics_trackingserver]=e.trackingServer(),e.ssl()?a[this._analytics_ssl]=1:a[this._analytics_ssl]=0}function o(a){a[this._user_aid]=m.getAdobeAnalyticsID(),a[this._user_mid]=m.getVisitorID(),a[this._user_vid]=m.getUserID()}function p(a){var b=i.getAnalyticsParameters();b&&(b.aamb&&(a[this._aam_blob]=b.aamb),b.aamlh&&(a[this._aam_loc_hint]=b.aamlh))}function q(a){a[this._service_ovp]=e.mOVP(),a[this._service_sdk]=e.mSDK(),a[this._service_channel]=e.mChannel(),a[this._service_playername]=e.mPlayerName(),a[this._service_hbversion]=_version.codeVersion,a[this._service_apilevel]=_version.mediaAPILevel}function r(a){var b=m.getMediaInfo();b&&(a[this._stream_type]=b.streamType);var c=m.getQoSInfo();if(c){var d=Number(c.droppedFrames),e=Number(c.startupTime),f=Number(c.fps),g=Number(c.bitrate);isNaN(d)||(a[this._stream_droppedFrames]=Math.floor(d)),isNaN(e)||(a[this._stream_startup_time]=Math.floor(e)),isNaN(f)||(a[this._stream_fps]=Math.floor(f)),isNaN(g)||(a[this._stream_bitrate]=Math.floor(g))}}function s(a){var b=m.getMediaInfo();a[this._asset_type]="main",b&&(a[this._asset_mediaid]=b.id,a[this._asset_length]=Math.floor(b.length),a[this._asset_name]=b.name),a[this._asset_publisher]=e.mPublisher()}function t(a,b){var c=m.getCurrentPlayhead();"number"==typeof c&&(a[this._event_playhead]=Math.floor(c)),a[this._event_type]=b}function u(a,b){var c=b;if(m.isInAd()){c=m.getAdInfo().id+"_"+b}var d=ADBMobile_platform.getTimeSince1970Millis(),e=m.getTimeStampForEvent(c);a[this._event_prevts]=e,a[this._event_ts]=d,m.updateTimeStampForEvent(c,d)}function v(a,b){var c=m.getAssetRefContext(),d=0,e=a[this._event_ts],g=a[this._event_playhead];if(c.state===b&&(d=e-c.ts,b!==this._player_event_pause&&b!==this._player_event_stall)){var h=g-c.playhead,i=e-c.ts;(h>i*H||i>k._reportingInterval*H)&&(f.warning("Setting event duration to 0. playheadDelta:"+h+" tsDelta:"+i+" event type:"+b),d=0)}a[this._event_duration]=d}function w(a){a[this._asset_type]="ad";var b=m.getAdBreakInfo();if(b&&!b._isEmptyAdBreak){a[this._asset_resolver]=b.playerName||e.mPlayerName(),a[this._asset_podposition]=b.position,a[this._asset_podname]=b.name,a[this._asset_podoffset]=Math.floor(b.startTime);var c=h.md5(a[this._asset_mediaid]);a[this._asset_podid]=c+"_"+a[this._asset_podposition]}var d=m.getAdInfo();d&&(a[this._asset_adid]=d.id,a[this._asset_adname]=d.name,a[this._asset_adlength]=Math.floor(d.length)),a[this._asset_adsid]=E.call(this)}function x(a){a[this._stream_chaptersid]=D.call(this);var b=m.getChapterInfo();if(b){a[this._stream_chapterpos]=b.position;var c=h.md5(a[this._asset_mediaid]);a[this._stream_chapterid]=c+"_"+a[this._stream_chapterpos],a[this._stream_chaptername]=b.name,a[this._stream_chapteroffset]=Math.floor(b.offset),a[this._stream_chapterlength]=Math.floor(b.length)}}function y(a){z.call(this,a),m.isInAd()&&A.call(this,a),m.isInChapter()&&B.call(this,a)}function z(a){var b=m.getMediaContextData();if(b)for(var c in b)if(b.hasOwnProperty(c)){var d=this.metaKey+c;a[d]=b[c]}}function A(a){var b=m.getAdContextData();if(b)for(var c in b)if(b.hasOwnProperty(c)){var d=this.metaKey+c;a[d]=b[c]}}function B(a){var b=m.getChapterContextData();if(b)for(var c in b)if(b.hasOwnProperty(c)){var d=this.metaKey+c;a[d]=b[c]}}function C(){return this._mediaSessionIdValue||(this._mediaSessionIdValue=F.call(this)),this._mediaSessionIdValue}function D(){return this._chapterSessionIdValue||(this._chapterSessionIdValue=F.call(this)),this._chapterSessionIdValue}function E(){return this._adSessionIdValue||(this._adSessionIdValue=F.call(this)),this._adSessionIdValue}function F(){return""+ADBMobile_platform.getTimeSince1970Millis()+Math.floor(1e9*Math.random()+1)}function G(){this._analytics_rsid="s:sc:rsid",this._analytics_trackingserver="s:sc:tracking_server",this._analytics_ssl="h:sc:ssl",this._user_aid="s:user:aid",this._user_mid="s:user:mid",this._user_vid="s:user:id",this._aam_blob="s:aam:blob",this._aam_loc_hint="l:aam:loc_hint",this._cuser_id="s:cuser:userId.id",this._cuser_puuid="s:cuser:puuid.id",this._service_sdk="s:sp:sdk",this._service_apilevel="l:sp:hb_api_lvl",this._service_channel="s:sp:channel",this._service_ovp="s:sp:ovp",this._service_playername="s:sp:player_name",this._service_hbversion="s:sp:hb_version",this._asset_type="s:asset:type",this._asset_publisher="s:asset:publisher",this._asset_mediaid="s:asset:video_id",this._asset_length="l:asset:length",this._asset_name="s:asset:name",this._stream_type="s:stream:type",this._stream_droppedFrames="l:stream:dropped_frames",this._stream_startup_time="l:stream:startup_time",this._stream_fps="l:stream:fps",this._stream_bitrate="l:stream:bitrate",this._stream_chaptersid="s:stream:chapter_sid",this._stream_chapterid="s:stream:chapter_id",this._stream_chaptername="s:stream:chapter_name",this._stream_chapteroffset="l:stream:chapter_offset",this._stream_chapterpos="l:stream:chapter_pos",this._stream_chapterlength="l:stream:chapter_length",this._asset_resolver="s:asset:resolver",this._asset_adid="s:asset:ad_id",this._asset_adsid="s:asset:ad_sid",this._asset_adname="s:asset:ad_name",this._asset_adlength="l:asset:ad_length",this._asset_podid="s:asset:pod_id",this._asset_podposition="s:asset:pod_position",this._asset_podname="s:asset:pod_name",this._asset_podoffset="l:asset:pod_offset",this._event_sid="s:event:sid",this._event_ts="l:event:ts",this._event_prevts="l:event:prev_ts",this._event_type="s:event:type",this._event_duration="l:event:duration",this._event_playhead="l:event:playhead",this._mediaSessionIdValue=null,this._chapterSessionIdValue=null,this._adSessionIdValue=null,this.metaKey="s:meta:",this._aa_start="aa_start",this._aa_ad_start="aa_ad_start",this._bitrate_change="bitrate_change",this._chapter_start="chapter_start",this._chapter_complete="chapter_complete",this._ad_start="media-ad-start",this._ad_complete="media-ad-complete",this._media_start="media-start",this._media_complete="media-complete",this._error="error",this._player_event_play="play",this._player_event_pause="pause",this._player_event_buffer="buffer",this._player_event_stall="stall",this._player_event_start="start"}var H=1.5;return{init:G,resolveDataForEvent:b,getContextData:c,resetSessionIds:j}}(),o=function(){function a(a){return void 0===a.id?(f.warning("Media - MediaInfo does not have value for media-id"),!1):void 0!==a.length||(f.warning("Media - MediaInfo does not have value for playhead"),!1)}function b(a){return void 0!==a.position||(f.warning("Media - AdBreak Info does not have value for position"),!1)}function c(a){return void 0!==a.id||(f.warning("Media - Ad Info does not have value for ad id"),!1)}function d(a){return void 0===a.position?(f.warning("Media - Chapter Info does not have value for chapter position"),!1):void 0===a.name?(f.warning("Media - Chapter Info does not have value for chapter name"),!1):void 0===a.offset?(f.warning("Media - Chapter Info does not have value for chapter offset"),!1):void 0!==a.length||(f.warning("Media - Chapter Info does not have value for chapter length"),!1)}function g(a){return void 0===a.droppedFrames?(f.warning("Media - QoS Info does not have value for dropped frames"),!1):void 0===a.startupTime?(f.warning("Media - QoS Info does not have value for startup time"),!1):void 0===a.fps?(f.warning("Media - QoS Info does not have value for frames per second"),!1):void 0!==a.bitrate||(f.warning("Media - QoS Info does not have value for bitrate"),!1)}function h(a){return e.mSDK()?e.mChannel()?e.mOVP()?!!e.mPlayerName()||(f.warning("Media - Config object does not have value for playername."),!1):(f.warning("Media - Config object does not have value for ovp."),!1):(f.warning("Media - Media - Config object does not have value for channel."),!1):(f.warning("Media - Config object does not have value for sdk."),!1)}return{isValidMediaInfoObject:a,isValidAdBreakInfoObject:b,isValidAdInfoObject:c,isValidChapterInfoObject:d,isValidQoSInfoObject:g,isValidConfigObject:h}}(),p=p||{};!function(a){"use strict";function b(a,b){return this.key=a,this.values=b,this}b.prototype.matches=function(a){var b=a[this.key];if(void 0===b||null===b)return!1;if(this.values)for(var c=0;c<this.values.length;++c)if(-1!=b.indexOf(this.values[c]))return!0;return!1},a.MatcherContains=b}(p);var p=p||{};!function(a){"use strict";function b(a,b){var c=a.length-b.length,d=a.lastIndexOf(b,c);return-1!==d&&d===c}function c(a,b){return this.key=a,this.values=b,this}c.prototype.matches=function(a){var c=a[this.key];if(void 0===c||null===c)return!1;if(this.values)for(var d=0;d<this.values.length;++d)if(b(c,this.values[d]))return!0;return!1},a.MatcherEndsWith=c}(p);var p=p||{};!function(a){"use strict";function b(a,b){return this.key=a,this.values=b,this}b.prototype.matches=function(a){var b=a[this.key];if(void 0===b||null===b)return!1;if(this.values)for(var c=0;c<this.values.length;++c)if(String(b)===String(this.values[c]))return!0;return!1},a.MatcherEquals=b}(p);var p=p||{};!function(a){"use strict";function b(a,b){return this.key=a,this.values=b,this}b.prototype.matches=function(a){return void 0!==a[this.key]},a.MatcherExists=b}(p);var p=p||{};!function(a){"use strict";function b(a,b){return this.key=a,this.values=b,this}b.prototype.matches=function(a){var b=a[this.key];if(void 0===b||null===b)return!1;if(this.values)for(var c=0;c<this.values.length;++c)if(Number(b)>Number(this.values[c]))return!0;return!1},a.MatcherGreaterThan=b}(p);var p=p||{};!function(a){"use strict";function b(a,b){return this.key=a,this.values=b,this}b.prototype.matches=function(a){var b=a[this.key];if(void 0===b||null===b)return!1;if(this.values)for(var c=0;c<this.values.length;++c)if(Number(b)>=Number(this.values[c]))return!0;return!1},a.MatcherGreaterThanOrEqual=b}(p);var p=p||{};!function(a){"use strict";function b(a,b){return this.key=a,this.values=b,this}b.prototype.matches=function(a){var b=a[this.key];if(void 0===b||null===b)return!1;if(this.values)for(var c=0;c<this.values.length;++c)if(Number(b)<Number(this.values[c]))return!0;return!1},a.MatcherLessThan=b}(p);var p=p||{};!function(a){"use strict";function b(a,b){return this.key=a,this.values=b,this}b.prototype.matches=function(a){var b=a[this.key];if(void 0===b||null===b)return!1;if(this.values)for(var c=0;c<this.values.length;++c)if(Number(b)<=Number(this.values[c]))return!0;return!1},a.MatcherLessThanOrEqual=b}(p);var p=p||{};!function(a){"use strict";function b(b,c){return this.containsHandler=new a.MatcherContains(b,c),this}b.prototype.matches=function(a){return!this.containsHandler.matches(a)},a.MatcherNotContains=b}(p);var p=p||{};!function(a){"use strict";function b(b,c){return this.equalsHandler=new a.MatcherEquals(b,c),this}b.prototype.matches=function(a){return!this.equalsHandler.matches(a)},a.MatcherNotEquals=b}(p);var p=p||{};!function(a){"use strict";function b(b,c){return this._handler=new a.MatcherExists(b,c),this}b.prototype.matches=function(a){return!this._handler.matches(a)},a.MatcherNotExists=b}(p);var p=p||{};!function(a){"use strict";function b(a,b){return this.key=a,this.values=b,this}b.prototype.matches=function(a){var b=a[this.key];if(void 0===b||null===b)return!1;if(this.values)for(var c=0;c<this.values.length;++c)if(0===b.indexOf(this.values[c]))return!0;return!1},a.MatcherStartsWith=b}(p);var q=function(){function a(a){return this.JSON_CONFIG_TEMPLATE="template",this.JSON_CONFIG_MESSAGE_ID="messageId",this.JSON_CONFIG_SHOW_RULE="showRule",this.JSON_CONFIG_START_DATE="startDate",this.MESSAGE_JSON_PAYLOAD="payload",this.JSON_CONFIG_END_DATE="endDate",this.JSON_CONFIG_SHOW_OFFLINE="showOffline",this.JSON_CONFIG_AUDIENCES="audiences",this.JSON_CONFIG_TRIGGERS="triggers",this.JSON_CONFIG_ASSETS="assets",this.MESSAGE_IMAGE_CACHE_DIR="messageImages",this.JSON_DEFAULT_START_DATE=0,this.JSON_DEFAULT_SHOW_OFFLINE="false",this.MESSAGE_ENUM_STRING_UNKNOWN="unknown",this.MESSAGE_SHOW_RULE_STRING_ALWAYS="always",this.MESSAGE_SHOW_RULE_STRING_ONCE="once",this.MESSAGE_SHOW_RULE_STRING_UNTIL_CLICK="untilClick",this.MESSAGE_TEMPLATE_STRING_ALERT="alert",this.MESSAGE_TEMPLATE_STRING_FULLSCREEN="fullscreen",this.MESSAGE_TEMPLATE_STRING_LOCAL_NOTIFICATION="local",this.MESSAGE_TEMPLATE_STRING_CALLBACK="callback",this.MESSAGE_TYPE_HANDLER="handler",this.MESSAGE_TYPE="type",this.COMBINED_VARS="combinedVars",this.ADB_TEMPLATE_CALLBACK_URL="templateurl",this.ADB_TEMPLATE_CALLBACK_BODY="templatebody",this.ADB_TEMPLATE_CALLBACK_TYPE="contenttype",this.ADB_TEMPLATE_CALLBACK_TIMEOUT="timeout",this.ADB_TEMPLATE_TOKEN_START="{",this.ADB_TEMPLATE_TOKEN_END="}",this.ADB_TEMPLATE_TIMEOUT_DEFAULT=2,this.message={},this.message[this.JSON_CONFIG_MESSAGE_ID]="",this.message[this.JSON_CONFIG_TEMPLATE]="",this.message[this.MESSAGE_TYPE_HANDLER]=null,this.message[this.JSON_CONFIG_START_DATE]=this.JSON_DEFAULT_START_DATE,this.message[this.JSON_CONFIG_END_DATE]=null,this.message[this.JSON_DEFAULT_SHOW_OFFLINE]=this.JSON_DEFAULT_SHOW_OFFLINE,this.message[this.JSON_CONFIG_AUDIENCES]=[],this.message[this.JSON_CONFIG_TRIGGERS]=[],this.message[this.MESSAGE_TYPE]=null,this.message[this.COMBINED_VARS]={},this.validLetters={},this.validLetters.a=1,this.validLetters.b=1,this.validLetters.c=1,this.validLetters.d=1,this.validLetters.e=1,this.validLetters.f=1,this.validLetters.g=1,this.validLetters.h=1,this.validLetters.i=1,this.validLetters.j=1,this.validLetters.k=1,this.validLetters.l=1,this.validLetters.m=1,this.validLetters.n=1,this.validLetters.o=1,this.validLetters.p=1,this.validLetters.q=1,this.validLetters.r=1,this.validLetters.s=1,this.validLetters.t=1,this.validLetters.u=1,this.validLetters.v=1,this.validLetters.w=1,this.validLetters.x=1,this.validLetters.y=1,this.validLetters.z=1,this.validLetters[0]=1,this.validLetters[1]=1,this.validLetters[2]=1,this.validLetters[3]=1,this.validLetters[4]=1,this.validLetters[5]=1,this.validLetters[6]=1,this.validLetters[7]=1,this.validLetters[8]=1,this.validLetters[9]=1,this.validLetters._=1,this.validLetters["."]=1,this.validLetters["%"]=1,b.call(this,a)?this:(f.warning("Message - Initialization failed"),null)}function b(a){if("object"==typeof a)return a[this.JSON_CONFIG_TEMPLATE]?(this.message[this.JSON_CONFIG_TEMPLATE]=a[this.JSON_CONFIG_TEMPLATE],this.message[this.JSON_CONFIG_TEMPLATE]!=this.MESSAGE_TEMPLATE_STRING_CALLBACK?(f.warning("Message - unable to create instance of message with that template"),!1):(this.message[this.MESSAGE_TYPE]=this.MESSAGE_TEMPLATE_STRING_CALLBACK,c.call(this,a))):(f.warning("Message - template is required for postback message"),!1)}function c(a){if(a){if(!a[this.JSON_CONFIG_MESSAGE_ID]||""===a[this.JSON_CONFIG_MESSAGE_ID])return f.warning("Message - unable to create instance of message without message id"),!1;if(this.message[this.JSON_CONFIG_MESSAGE_ID]=a[this.JSON_CONFIG_MESSAGE_ID],!a[this.MESSAGE_JSON_PAYLOAD])return f.warning("Data Callback - Unable to create data callback. payload is empty"),!1;this.message[this.MESSAGE_JSON_PAYLOAD]=a[this.MESSAGE_JSON_PAYLOAD];if(!d.call(this))return!1;if(a[this.JSON_CONFIG_SHOW_RULE]&&""!==a[this.JSON_CONFIG_SHOW_RULE]){if(a[this.JSON_CONFIG_SHOW_RULE]==this.message[this.MESSAGE_ENUM_STRING_UNKNOWN])return f.warning("Message - Messages - Unable to create message. showrule is invalid"),!1;if(!h.call(this,a[this.JSON_CONFIG_SHOW_RULE]))return f.warning("Message - unsupported message rule"),!1;this.message[this.JSON_CONFIG_SHOW_RULE]=a[this.JSON_CONFIG_SHOW_RULE]}var b;if(b=a[this.JSON_CONFIG_START_DATE]&&""!==a[this.JSON_CONFIG_START_DATE]?a[this.JSON_CONFIG_START_DATE]:this.JSON_DEFAULT_START_DATE,this.message[this.JSON_CONFIG_START_DATE]=b,!a[this.JSON_CONFIG_END_DATE]||""===a[this.JSON_CONFIG_END_DATE])return f.warning("Message - cannot create message. endDate is invalid."),!1;this.message[this.JSON_CONFIG_END_DATE]=a[this.JSON_CONFIG_END_DATE],a[this.JSON_CONFIG_SHOW_OFFLINE]&&""!==a[this.JSON_CONFIG_SHOW_OFFLINE]?this.message[this.JSON_CONFIG_SHOW_OFFLINE]=a[this.JSON_CONFIG_SHOW_OFFLINE]:this.message[this.JSON_CONFIG_SHOW_OFFLINE]=this.message[this.JSON_DEFAULT_SHOW_OFFLINE];var c,e;if(a[this.JSON_CONFIG_AUDIENCES]){var g=a[this.JSON_CONFIG_AUDIENCES];for(e=0;e<g.length;++e){var i=g[e];c=new r.Matcher(i),this.message[this.JSON_CONFIG_AUDIENCES].push(c)}}if(a[this.JSON_CONFIG_TRIGGERS]){var j=a[this.JSON_CONFIG_TRIGGERS];for(e=0;e<j.length;++e){var k=j[e];c=new r.Matcher(k),this.message[this.JSON_CONFIG_TRIGGERS].push(c)}return this.message[this.JSON_CONFIG_TRIGGERS].length<=0?(f.warning("Messages - Unable to load message - at least one valid trigger is required for a message."),!1):(f.debug("Messages - "+this.message[this.JSON_CONFIG_TRIGGERS].length+" triggers found"),!0)}return f.warning("Messages - empty messages"),!1}}function d(){var a=this.message[this.MESSAGE_JSON_PAYLOAD];return a[this.ADB_TEMPLATE_CALLBACK_URL]&&""!==a[this.ADB_TEMPLATE_CALLBACK_URL]?(this.message[this.ADB_TEMPLATE_CALLBACK_URL]=a[this.ADB_TEMPLATE_CALLBACK_URL],a[this.ADB_TEMPLATE_CALLBACK_TIMEOUT]?this.message[this.ADB_TEMPLATE_CALLBACK_TIMEOUT]=a[this.ADB_TEMPLATE_CALLBACK_TIMEOUT]:(f.warning("Data Callback - setting default timeout"),this.message[this.ADB_TEMPLATE_CALLBACK_TIMEOUT]=this.message[this.ADB_TEMPLATE_TIMEOUT_DEFAULT]),a[this.ADB_TEMPLATE_CALLBACK_BODY]&&""!==a[this.ADB_TEMPLATE_CALLBACK_BODY]?(this.message[this.ADB_TEMPLATE_CALLBACK_BODY]=a[this.ADB_TEMPLATE_CALLBACK_BODY],this.message[this.ADB_TEMPLATE_CALLBACK_TYPE]=a[this.ADB_TEMPLATE_CALLBACK_TYPE]):f.warning("Data Callback - Unable to read templatebody. This is not a required field"),!0):(f.warning("Data Callback - Unable to create data callback. templateurl is required"),!1)}function h(a){return a===this.MESSAGE_SHOW_RULE_STRING_ALWAYS||a===this.MESSAGE_SHOW_RULE_STRING_ONCE}function j(a){return a}function k(a){var b={};i.getMarketingCloudIDAsync(function(a){b["%mcid%"]=a}),b["%timestampz%"]=ADBMobile_platform.getDateInISOString(),b["%timestampu%"]=ADBMobile_platform.getTimeSince1970(),b["%sdkver%"]=_version.codeVersion,b["%cachebust%"]=""+1e8*Math.random();var c=g.serializeParameters(a);if(c.length>2&&(c=c.substring(1)),b["%all_url%"]=c,a){var d=JSON.stringify(a);d&&(b["%all_json%"]=d)}return b}function l(a){var b=[];if(a&&""!==a){var c,d=a.length;for(c=0;c<d;c++){if(a.substring(c,c+1)===this.ADB_TEMPLATE_TOKEN_START){var e;for(e=c+1;e<d;e++){if(a.substring(e,e+1)===this.ADB_TEMPLATE_TOKEN_END)break}if(e==d)break;var g=a.substring(c,e+1);!0===p.call(this,g.substring(1,g.length-1))&&(b.push(g),c=e)}}}else f.warning("findTokensForExpansion: empty string with tokens");return b}function m(a,b){var c={},d=this.message[this.COMBINED_VARS]||{};if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.substring(1,f.length-1).toLowerCase(),h=d[g];c[f]=h?b?encodeURIComponent(h):h:""}return c}function n(a,b){var c,d=a;for(c in b)if(b.hasOwnProperty(c))for(;-1!=d.indexOf(c);){var e=d.indexOf(c),f=b[c],g=d.slice(0,e),h=d.slice(e+c.length);d=""!==f?g+f+h:g+h}return d}function o(a,b){e.getPrivacyStatus()!=e.PRIVACY_STATUS_OPT_OUT&&(f.debug("Messaging - Sending signal request ("+a.toString()+")"),ADBMobile_platform.httpRequestAsync(a,"POST",{"Content-type":"application/x-www-form-urlencoded"},b,2e3,function(a,b,c){200==a?f.debug("Messaging - Successfully sent hit ("+c+")"):f.error("Messaging - Unable to send hit ("+c+") response ("+b+")")}))}function p(a){var b,c=!0;for(b=0;b<a.length;b++){var d=a.charAt(b).toLowerCase();if(!this.validLetters[d]){c=!1;break}}return c}return a.prototype.shouldShowForVariables=function(a,b){var c={};if(b&&g.append(c,b),a&&g.append(c,a),g.append(c,k.call(this,c)),this.message[this.COMBINED_VARS]=c,this.message[this.JSON_CONFIG_START_DATE]&&ADBMobile_platform.getTimeSince1970()<this.message[this.JSON_CONFIG_START_DATE])return!1;if(this.message[this.JSON_CONFIG_END_DATE]&&ADBMobile_platform.getTimeSince1970()>this.message[this.JSON_CONFIG_END_DATE])return!1;var d=this.message[this.JSON_CONFIG_TRIGGERS];if(d)for(var e=j.call(this,b),f=0;f<d.length;++f){var h=d[f];if(!h.matchesInMaps(a,e))return!1}return!0},a.prototype.show=function(){var a=this.message[this.ADB_TEMPLATE_CALLBACK_URL],b=a,c=l.call(this,a),d=m.call(this,c,!0),e=["{%all_url%}"],f=m.call(this,e,!1);g.append(d,f),d&&(b=n.call(this,a,d));var h=this.message[this.ADB_TEMPLATE_CALLBACK_BODY],i=h;if(h){var j=ADBMobile_platform.decodeBase64String(h),k=l.call(this,j),p=this.message[this.ADB_TEMPLATE_CALLBACK_TYPE],q=!0;p&&-1!=p.toLowerCase().search("application/json")&&(q=!1);var r=m.call(this,k,q),s=[];s.push("{%all_url%}"),s.push("{%all_json%}");var t=m.call(this,s,!1);g.append(r,t),r&&(i=n.call(this,j,r))}o.call(this,b,i)},{Message:a}}(),r=function(){"use strict";function a(a,b,c){if(!p||!a||!b)return null;var d=null;switch(a){case"eq":d=p.MatcherEquals;break;case"ne":d=p.MatcherNotEquals;break;case"gt":d=p.MatcherGreaterThan;break;case"lt":d=p.MatcherLessThan;break;case"ge":d=p.MatcherGreaterThanOrEqual;break;case"le":d=p.MatcherLessThanOrEqual;break;case"co":d=p.MatcherContains;break;case"nc":d=p.MatcherNotContains;break;case"sw":d=p.MatcherStartsWith;break;case"ew":d=p.MatcherEndsWith;break;case"ex":d=p.MatcherExists;break;case"nx":d=p.MatcherNotExists}var e=b.toLowerCase();return d?new d(e,c):null}function b(b){return b&&(this._json=b,this._handler=a(b.matches,b.key,b.values)),this}return b.prototype.matchesInMaps=function(a,b){if(this._handler){var c={};return g.append(c,a),g.append(c,b),this._handler.matches(c)}return!1},{Matcher:b}}(),s=function(){function a(){k=[],l=!1,m=[]}function b(a){if(a){for(var b=[],c=0;c<a.length;++c)"callback"===a[c].template&&b.push(new q.Message(a[c]));k=b}}function c(){for(var a=0;a<m.length;++a)i(m[a].vars,m[a].cData);m=[],l=!0}function d(){b(e.getMessages());var a=e.getRemotes()
;a&&a.messages?ADBMobile_platform.httpRequestAsync(a.messages,"GET",{},null,500,function(a,d){if(200==a&&d)try{responseJSON=JSON.parse(d),b(responseJSON.messages)}catch(e){f.debug("remotes.messages - Unable to parse response ("+e+")")}c()}):c()}function h(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){var d=c.toLowerCase();b[d]=a[c]}return b}function i(a,b){if(k&&k.length>0)for(var c=h(a),d=h(b),e=0;e<k.length;++e){var f=k[e];f&&f.shouldShowForVariables(c,d)&&f.show()}}function j(a,b){if(a&&b)return l?void i(a,b):void m.push({vars:g.clone(a),cData:g.clone(b)})}var k=[],l=!1,m=[];return{init:d,checkFor3rdPartyCallbacks:j,reset:a}}();!function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(c>>16)<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[14+(c+64>>>9<<4)]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;c<16;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}a.md5=t}(h);var t={version:_version,analytics:{trackState:b.trackState,trackAction:b.trackAction,getTrackingIdentifier:a.getAIDAsync},config:{setUserIdentifier:e.setUserIdentifier,getUserIdentifier:e.getUserIdentifier,setPrivacyStatus:e.setPrivacyStatus,getPrivacyStatus:e.getPrivacyStatus,setLoggerCallback:f.setLoggerCallback,setDebugLogging:f.setDebugLogging,getDebugLogging:f.getDebugLogging,PRIVACY_STATUS_OPT_IN:e.PRIVACY_STATUS_OPT_IN,PRIVACY_STATUS_OPT_OUT:e.PRIVACY_STATUS_OPT_OUT},visitor:{syncIdentifiers:i.idSync,getMarketingCloudID:i.getMarketingCloudIDAsync},audienceManager:{submitSignal:d.submitSignal,getVisitorProfile:d.getVisitorProfile,getDpid:d.getDpid,getDpuuid:d.getDpuuid,setDpidAndDpuuid:d.setDpidAndDpuuid},media:{setDelegate:l.setDelegate,trackSessionStart:l.trackSessionStart,trackPlay:l.trackPlay,trackPause:l.trackPause,trackError:l.trackError,trackEvent:l.trackEvent,trackComplete:l.trackComplete,trackSessionEnd:l.trackSessionEnd,StreamType:l.StreamType,Event:l.Event,MediaObjectKey:l.MediaObjectKey,VideoMetadataKeys:l.VideoMetadataKeys,AdMetadataKeys:l.AdMetadataKeys,createMediaObject:l.createMediaObject,createAdBreakObject:l.createAdBreakObject,createChapterObject:l.createChapterObject,createAdObject:l.createAdObject,createQoSObject:l.createQoSObject,trackLoad:l.trackLoad,trackStart:l.trackStart,trackUnload:l.trackUnload,MediaInfo:l.MediaInfo,AdInfo:l.AdInfo,ChapterInfo:l.ChapterInfo,AdBreakInfo:l.AdBreakInfo,QoSInfo:l.QoSInfo,BUFFER_START:l.Event.BufferStart,BUFFER_COMPLETE:l.Event.BufferComplete,SEEK_START:l.Event.SeekStart,SEEK_COMPLETE:l.Event.SeekComplete,BITRATE_CHANGE:l.Event.BitrateChange,CHAPTER_START:l.Event.ChapterStart,CHAPTER_COMPLETE:l.Event.ChapterComplete,CHAPTER_SKIP:l.Event.ChapterSkip,AD_BREAK_START:l.Event.AdBreakStart,AD_BREAK_COMPLETE:l.Event.AdBreakComplete,AD_BREAK_SKIP:l.Event.AdBreakSkip,AD_START:l.Event.AdStart,AD_COMPLETE:l.Event.AdComplete,AD_SKIP:l.Event.AdSkip,STREAM_TYPE_LIVE:l.StreamType.LIVE,STREAM_TYPE_VOD:l.StreamType.VOD}};return e.init(),a.init(),i.init(),s.init(),l.init(),t}();